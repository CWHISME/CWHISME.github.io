<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="CWHISME" href="https://wangjiaying.top/rss.xml"><link rel="alternate" type="application/atom+xml" title="CWHISME" href="https://wangjiaying.top/atom.xml"><link rel="alternate" type="application/json" title="CWHISME" href="https://wangjiaying.top/feed.json"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="Unity3D,性能优化,笔记,翻译"><link rel="canonical" href="https://wangjiaying.top/2023/06/16/Unity3DAssets-ResourcesAndAssetBundles-%E7%AC%94%E8%AE%B0/"><title>Assets、Resources 和 AssetBundles - 翻译 - 笔记 - Unity3D | Jiaying's Note = CWHISME = 人不能没有梦想，也要有足够的敬畏</title><meta name="generator" content="Hexo 5.4.2"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">Assets、Resources 和 AssetBundles - 翻译 - 笔记</h1><div class="meta"><span class="item" title="创建时间：2023-06-16 16:23:25"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2023-06-16T16:23:25+08:00">2023-06-16</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>9.8k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>9 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Jiaying's Note</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="/images/coverimages/large/9bd9b167gy1g2qk3q3oboj21hc0u0k4b.webp"></li><li class="item" data-background-image="/images/coverimages/large/61038725_p0.webp"></li><li class="item" data-background-image="/images/coverimages/large/6833939bly1gipetfk5zwj20zk0m8e81.webp"></li><li class="item" data-background-image="/images/coverimages/large/6833939bly1giclize41wj20zk0m87gk.webp"></li><li class="item" data-background-image="/images/coverimages/large/9bd9b167gy1g4lhdrbztdj21hc0xc11p.webp"></li><li class="item" data-background-image="/images/coverimages/large/9bd9b167gy1g4lhi5trgrj21hc0xc4cu.webp"></li></ul></div><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div></header><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/Unity3D/" itemprop="item" rel="index" title="分类于 Unity3D"><span itemprop="name">Unity3D</span></a><meta itemprop="position" content="1"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://wangjiaying.top/2023/06/16/Unity3DAssets-ResourcesAndAssetBundles-%E7%AC%94%E8%AE%B0/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/../img/avator"><meta itemprop="name" content="WangJiaYing"><meta itemprop="description" content="人不能没有梦想，也要有足够的敬畏, 己所不欲，勿施于人"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="CWHISME"></span><div class="body md" itemprop="articleBody"><h1 id="前言"><a class="anchor" href="#前言">#</a> 前言</h1><p>最开始是因为项目的一个问题：微信的 Unity 转小游戏，转出来的 <code>XXXX.webgl.data.unityweb.bin.txt(首包资源文件)</code> 文件极大，其中占据数量最多的是一系列的 <code>MonoScript</code> ，且经过对比检查，其它占用够大的 Shader、图片或冗余资源都被我一一处理过了，但是呢这个文件依然很大。</p><p>达到什么程度呢？公司其它项目转出来只有 7M，而我们的达到了 16M？！这正常吗？不正常吧！</p><p>最麻烦的一点是：经过 <code>AssetStudio</code> 打开看之后，排头的只有寥寥几个资源，而且都不算大：</p><p><img data-src="/blogimages/2023/2023-06-16/Snipaste_2023-06-16_16-29-42.jpg" alt=""></p><p>与只有 <code>7M</code> 资源的对比， <code>AssetStudio</code> 列出的文件基本上也是一样的。</p><p>于是去查找信息，结果找到 <span class="exturl" data-url="aHR0cHM6Ly9nd2IudGVuY2VudC5jb20vY29tbXVuaXR5L2RldGFpbC8xMjUwMjc=">Unity 资源管理 - 资源（Assets）、对象（Objects）和序列化 - 腾讯游戏学堂</span> ，然后又顺着其贴的原始文档找到了： <span class="exturl" data-url="aHR0cHM6Ly9sZWFybi51bml0eS5jb20vdHV0b3JpYWwvYXNzZXRzLXJlc291cmNlcy1hbmQtYXNzZXRidW5kbGVz">Assets, Resources and AssetBundles - Unity Learn</span> 文章，这篇文章看着算是官方对 Unity 的资源系统的一个比较详细的描述了，有点熟悉..... 以前是不是见过？曾经好像零零散散在某些文章看到过，但是并不齐全，于是这次就整体过了一遍。</p><p>注：本文也并不是全文翻译，而是取自己觉得重要、或都知道什么情况的知识点就暂且忽略了 (如 AssetBundle 依赖管理)。</p><p>(当然截止本文完成的时候，依然没有找出资源大小的具体原因，打算后续把 <code>AssetStudio</code> 源码拉下来调试一下，看是不是有什么隐藏资源)</p><h1 id="资源与序列化"><a class="anchor" href="#资源与序列化">#</a> 资源与序列化</h1><h2 id="assets-and-objects"><a class="anchor" href="#assets-and-objects">#</a> Assets and Objects</h2><p>Asset：指的是一个存在于磁盘上的资源文件<br>UnityEngine.Objects：一组序列化数据，共同描述资源的特定实例<br>大多数 Object 类型都是内置类型，除了两个例外：</p><ul><li>ScriptableObject：提供一个方便的自定义数据类型的系统，这些类型可以由 Unity 自动序列化和反序列化，并在 Unity 编辑器窗口中进行操作。</li><li>MonoBehaviour：提供对 MonoScript 引用的包装，MonoScript 是 Unity 用于保存对特定程序集和命名空间中特定脚本类的引用的内部数据类型</li></ul><p>Assets 和 Objects 之间是一对多的关系：任何给定的资产文件都包含一个或多个对象。</p><h2 id="标识与引用"><a class="anchor" href="#标识与引用">#</a> 标识与引用</h2><p>所有 UnityEngine.Objects 都可以引用其他 UnityEngine.Objects，被引用的 Object 可能在同一个 Asset 文件中，也可能在导入的其它 Asset 文件中</p><ul><li>在序列化后，这些引用由两部分独立的数据组成：FileGUID (标识资源位置) 和 LocalID (标识资源中的对象 [Object])<ul><li>FileGUID 存储在 .meta 文件中</li><li>FileGUID 提供了文件特定位置的抽象，只要特定文件 GUID 可以与特定文件相关联，该文件在磁盘上的位置就变得无关紧要。该文件可以自由移动，而无需更新引用该文件的所有对象。<ul><li>由于任何给定的资产文件可能包含（或通过导入生成）多个 UnityEngine.Object 资源，因此需要 LocalID 来明确区分每个不同的对象。</li></ul></li><li>Unity 编辑器将文件路径和 FileGUID 进行映射，每当加载或导入 Asset 时，都会记录一个映射条目。</li></ul></li><li>注：如果 .meta 文件在 Unity 编辑器关闭时丢失，或者 Asset 的路径发生变化而 .meta 文件没有随 Asset 一起移动，那么对该 Asset 中对象的所有引用都将被破坏。</li></ul><p>尽管 FileGUID 和 LocalID 足够稳健，但 GUID 比较速度较慢</p><ul><li>因此 Unity 在内部维护了一份缓存（PersistentManager），它将 FileGUID 和 LocalID 转换成简单的、会话唯一（Session-unique）的整数：这些整数被称为 InstanceID，当有新的对象注册到缓存时，InstanceID 以简单的、单调递增的顺序分配</li><li>在启动时，游戏会立即初始化包含所有被项目需要的对象 (例如在内置场景中引用)、以及 Resources 文件夹中包含的所有对象的 InstanceID 缓存<ul><li>当在运行时创建新资源 (如 new Texture2D) 以及从 AssetBundle 加载对象时，新的条目也将添加到缓存中</li><li>在提供具体 FileGUID 和 LocalID 的 AssetBundle 被卸载时，会从缓存中移除 InstanceID 条目。这时原来的 InstanceID、FileGUID 和 LocalID 会被删除，如果再次加载了这个 AssetBundle，则会重新生成新的 InstanceID</li><li>注：当应用程序暂停时，可能从 iOS 上的图形内存中卸载图形资源，如果这些对象来源于已卸载的 AssetBundle，Unity 将无法重新加载对象的源数据。对这些对象的任何现有引用也将无效</li></ul></li><li>注：当构建项目时，FileGUID 和 LocalID 会被确定性地映射到更简单的格式 (这也是不能在运行时查询 Asset 的 FileGUID 的原因)，但概念仍然是相同的</li></ul><h1 id="monoscript"><a class="anchor" href="#monoscript">#</a> MonoScript</h1><p>其重点是 MonoBehaviour 引用 MonoScript (MonoBehaviour 就是 MonoScript 的包装器)，而 MonoScripts 只包含定位特定脚本类所需的信息，两种类型的对象都不包含脚本类的可执行代码。</p><ul><li>MonoScript 包含三个字符串：程序集名称、类名称和命名空间。</li></ul><p>当构建项目时，Unity 将 Assets 文件夹中所有松散的脚本文件编译成 Mono 程序集 (它们也是 MonoScript 引用的程序集)</p><ul><li>Plugins 子文件夹外的 C# 脚本被放入 Assembly-CSharp.dll</li><li>Plugins 子文件夹中的脚本被放入 Assembly-CSharp-firstpass.dll</li><li>注：还可以自定义程序集</li></ul><p>与其他资源不同，Unity 应用程序中包含的所有程序集都在应用程序启动时加载<br>这允许不同的 MonoBehaviours 引用特定的共享类，即使 MonoBehaviours 在不同的 AssetBundle 中。</p><h1 id="资源加载"><a class="anchor" href="#资源加载">#</a> 资源加载</h1><h2 id="加载方式"><a class="anchor" href="#加载方式">#</a> 加载方式</h2><p>在以下情况下会自动加载对象：</p><ul><li>映射到该对象的 InstanceID 被间接引用</li><li>该对象当前未加载到内存中</li><li>可以定位 (找到) 对象的源数据</li></ul><p>对象也可以在代码中显式加载，比如直接代码创建或调用资源加载 API (例如 AssetBundle.LoadAsset)<br>加载一个对象时，Unity 会尝试通过由每个被引用对象的 FileGUID 和 LocalID 转换而成的 InstanceID 来解析任何引用。<br>对象被间接引用而导致按需加载的条件：</p><ul><li>InstanceID 引用当前未加载的对象</li><li>InstanceID 具有在缓存中注册的有效 FileGUID 和 LocalID</li></ul><p>注 1：可以通过调用 Resources.UnloadAsset API 显式卸载来自 Resources 文件夹的对象，不过这些对象的 InstanceID 仍然有效，并且仍将包含有效的 FileGUID 和 LocalID 条目，只要被任何活动对象间接引用时，就会重新加载该对象<br>注 2：注意任何标有 HideFlags.DontUnloadUnusedAsset 和 HideFlags.HideAndDontSave 的东西都不会被卸载</p><h2 id="大资源加载消耗"><a class="anchor" href="#大资源加载消耗">#</a> 大资源加载消耗</h2><p>创建任何 GameObject 层次结构时，CPU 时间主要花费在以下几种方式上：</p><ul><li>读取源数据（从存储、AssetBundle、另一个 GameObject 等）</li><li>设置新 Transform 之间的父子关系</li><li>实例化新的游戏对象和组件</li><li>在主线程上唤醒新的游戏对象和组件</li></ul><p>后三种时间成本通常是不变的，无论层次结构是从现有层次结构中克隆还是从存储中加载。然而，读取源数据的时间随着序列化到层次结构中的组件和游戏对象的数量线性增加，并且还乘以数据源的速度。</p><ul><li>在所有当前平台上，从内存中的其他位置读取数据比从存储设备加载数据要快得多，加载操作的成本与存储 I/O 时间有关。</li></ul><p>如前所述，在序列化单体预制件时，每个 GameObject 和组件的数据都是单独序列化的，这可能会重复数据。</p><ul><li>例如，具有 30 个相同元素的 UI 屏幕会将相同元素序列化 30 次，从而产生大量二进制数据。</li><li>在加载时，必须从磁盘读取这 30 个重复元素中每一个的所有游戏对象和组件的数据，然后再传输到新实例化的对象。此文件读取时间是实例化大型预制件的总成本的主要消耗。</li><li>因此，大型层次结构对象应该在模块化中实例化，然后在运行时结合在一起。</li></ul><p>注：在实例化一个立即会重新设置为另一个对象子节点的新游戏对象时，请使用接受父对象参数的 GameObject.Instantiate 重载变体。使用此重载可避免为新游戏对象分配根变换层次结构。在测试中，这将实例化操作所需的时间加快了大约 5-10%。</p><h1 id="resources-目录"><a class="anchor" href="#resources-目录">#</a> Resources 目录</h1><p><strong>不要使用</strong><br>缺点很明显：</p><ul><li>使用 Resources 文件夹使细粒度的内存管理更加困难</li><li>资源文件夹使用不当会增加应用程序启动时间和构建时间</li><li>Resources 系统降低了项目向特定平台交付自定义内容的能力，并消除了增量内容升级的可能性<ul><li>AssetBundle Variants 可以用于根据每个设备调整内容</li></ul></li></ul><p>总之，官方是非常不推荐使用的，也许快速原型阶段可以使用，但当项目进入全面生产阶段时，应取消使用 Resources 文件夹<br>构建项目时，所有名为 Resources 的文件夹中的资源和对象都合并到一个序列化文件中。该文件还包含元数据和索引信息，类似于 AssetBundle。如 AssetBundle 文档中所述，该索引包括一个序列化查找树，用于将给定对象的名称解析为其适当的 FileGUID 和 LocalID。它还用于在序列化文件主体中的特定字节偏移处定位对象。</p><ul><li>在应用程序启动时，也会进行 Resources 资源数据结构的构建</li><li>在大多数平台上，查找数据结构是一个平衡的搜索树，其构建时间以 O (n log (n)) 的速度增长。随着资源文件夹中对象数量的增加，这种增长也会导致索引的加载时间以超线性方式增长。</li></ul><h1 id="assetbundle"><a class="anchor" href="#assetbundle">#</a> AssetBundle</h1><p>AssetBundle 由两部分组成：标头和数据段<br>标头</p><ul><li>包含有关 AssetBundle 的信息，例如其标识符、压缩类型和清单。清单是一个以对象名称为关键字的查找表。每个条目都提供一个字节索引，指示在 AssetBundle 的数据段中可以找到给定对象的位置。在大多数平台上，此查找表被实现为平衡搜索树。具体来说，Windows 和 OSX 衍生平台（包括 iOS）采用红黑树。因此，随着 AssetBundle 中资产数量的增长，构建清单所需的时间将超过线性增长。</li></ul><p>数据段</p><ul><li>数据段包含序列化 AssetBundle 中的 Assets 生成的原始数据。如果将 LZMA 指定为压缩方案，则会压缩所有序列化资产的完整字节数组。如果改为指定 LZ4，则单独压缩单独资产的字节。如果不使用压缩，数据段将保持为原始字节流。</li></ul><p>通常，Unity 会缓存一份 AssetBundle 的解压副本，以提高后续对同一个 AssetBundle 的加载请求的加载性能。</p><h2 id="加载-assetbundle-方式"><a class="anchor" href="#加载-assetbundle-方式">#</a> 加载 AssetBundle 方式</h2><h3 id="assetbundleloadfrommemoryasync"><a class="anchor" href="#assetbundleloadfrommemoryasync">#</a> AssetBundle.LoadFromMemory(Async)</h3><p>建议是不要使用这个 API</p><ul><li>这个 API 会从托管代码字节数组（C# 中的 byte []）加载 AssetBundle。它总是将源数据从托管代码字节数组复制到新分配的、连续的本机内存块中。如果 AssetBundle 是 LZMA 压缩的，它会在复制时解压 AssetBundle。未压缩和 LZ4 压缩的 AssetBundle 将被逐字复制。</li></ul><p>此 API 消耗的内存峰值量将至少是 AssetBundle 大小的两倍：一份在 API 创建的本机内存中，一份在传递给 API 的托管字节数组中。</p><ul><li>因此，从通过此 API 创建的 AssetBundle 加载的资源将在内存中复制三次：一次在托管代码字节数组中，一次在 AssetBundle 的本机内存副本中，第三次在资源本身的 GPU 或系统内存中</li></ul><h3 id="assetbundleloadfromfileasync"><a class="anchor" href="#assetbundleloadfromfileasync">#</a> AssetBundle.LoadFromFile(Async)</h3><p>这是一个高效的 API，用于从本地存储（如硬盘或 SD 卡）加载 AssetBundle。</p><ul><li>在桌面、控制台和移动平台上，API 只会加载 AssetBundle 的标头，剩余数据依然保留在磁盘上。<ul><li>AssetBundle 的对象将在调用加载方法（例如 AssetBundle.Load）或取消引用它们的 InstanceID 时按需加载。在这种情况下不会消耗过多的内存。</li></ul></li><li>在 Unity Editor 中，API 会将整个 AssetBundle 加载到内存中，就像从磁盘读取字节并使用 AssetBundle.LoadFromMemoryAsync 一样。如果在 Unity 编辑器中分析项目，此 API 可能会导致在 AssetBundle 加载期间出现内存峰值。这不影响真机性能，在采取修复措施之前应在真机设备上重新测试这些内存峰值情况。</li></ul><h3 id="unitywebrequestgetassetbundle"><a class="anchor" href="#unitywebrequestgetassetbundle">#</a> UnityWebRequest.GetAssetBundle</h3><p>这个 API 会使用工作线程，将下载的数据流式传输到固定大小的缓冲区，然后将缓冲的数据保存到临时存储或 AssetBundle 缓存，具体取决于下载处理程序的配置方式。</p><ul><li>所有这些操作都发生在本机代码中，从而消除了扩展托管堆的风险。</li><li>此外，此下载处理程序不会保留所有下载字节的本机代码副本，从而进一步减少了下载 AssetBundle 的内存开销</li></ul><p>注：LZMA 压缩的 AssetBundle 将在下载期间解压缩并使用 LZ4 压缩进行缓存。可以通过设置 Caching.CompressionEnabled 来更改此行为。</p><ul><li>如果缓存已满，Unity 将从缓存中删除最近最少使用的 AssetBundle</li><li>注：缓存系统中的 AssetBundle 仅由文件名标识 (而不是下载的完整 URL)</li></ul><p>下载完成后，AssetBundle 属性提供的对下载的 AssetBundle 的访问，与已在下载的 AssetBundle 上调用 AssetBundle.LoadFromFile 一样。</p><ul><li>如果向 UnityWebRequest 对象提供缓存信息，并且请求的 AssetBundle 已存在于 Unity 的缓存中，则此 API 的操作与 AssetBundle.LoadFromFile 相同。</li></ul><p>注 1：请确保下载程序代码在加载 AssetBundle 后正确调用 Dispose (或使用 using 语句)<br>注 2：更多缓存机制详情参考原文缓存机制部分<br>注 3：官方推荐若想自己实现细粒度资源下载管理，使用 C# HttpWebRequest 或自定义本机代码，官方强烈建议使用 Application.persistentDataPath 作为持久存储位置</p><h3 id="wwwloadfromcacheordownload"><a class="anchor" href="#wwwloadfromcacheordownload">#</a> WWW.LoadFromCacheOrDownload</h3><p>从 Unity 2017.1 开始，这个 API 只是对 UnityWebRequest 的包装，以后可能会直接弃用。</p><h3 id="总结"><a class="anchor" href="#总结">#</a> 总结</h3><p>总之，应尽可能使用 AssetBundle.LoadFromFile，这个 API 在速度、磁盘使用和运行时内存使用方面都是最有效的。<br>对于必须下载或修补 AssetBundles 的项目，建议使用 UnityWebRequest。<br>对于需要独特、特定缓存或下载要求的项目，可以考虑使用自定义下载器。任何自定义下载器都应该与 AssetBundle.LoadFromFile 兼容。</p><h2 id="加载-assetbundle-中的资源"><a class="anchor" href="#加载-assetbundle-中的资源">#</a> 加载 AssetBundle 中的资源</h2><p>可以使用三个不同的 API 从 AssetBundle 加载，这些 API 都属于 AssetBundle 对象的实例方法 (并且可选同步或异步)：</p><ul><li>LoadAsset (LoadAssetAsync)</li><li>LoadAllAssets (LoadAllAssetsAsync)</li><li>LoadAssetWithSubAssets (LoadAssetWithSubAssetsAsync)</li></ul><p>这些 API 的同步版本总是比异步版本快至少一帧。</p><ul><li>异步加载将每帧加载多个对象，直到它们达到时间片限制 (参考底层加载细节)。</li></ul><p>LoadAllAssets</p><ul><li>应该在加载多个独立的 UnityEngine.Objects 时使用。仅当需要加载 AssetBundle 中的大部分或所有对象时才应使用它。与其他两个 API 相比，LoadAllAssets 比多次单独调用 LoadAssets 稍微快一些。</li><li>因此，如果要加载的资源数量较多，但一次需要加载的 AssetBundle 不到 66%，可以考虑将 AssetBundle 拆分成多个更小的 bundle，使用 LoadAllAssets。</li></ul><p>LoadAssetWithSubAssets</p><ul><li>应该在加载包含多个嵌入式对象的复合资产时使用，例如带有嵌入式动画的 FBX 模型或其中嵌入了多个精灵的精灵图集。</li><li>如果需要加载的 Object 都来自同一个 Asset，但是和很多其他不相关的 Object 存储在一个 AssetBundle 中，那么就使用这个 API。</li></ul><p>对于任何其他情况，使用 LoadAsset 或 LoadAssetAsync</p><h2 id="底层加载细节"><a class="anchor" href="#底层加载细节">#</a> 底层加载细节</h2><p>UnityEngine.Object 加载是在主线程之外执行的：对象的数据使用工作线程从磁盘读取。</p><ul><li>任何不涉及 Unity 系统的线程敏感部分（脚本、图形）的内容都将在工作线程上进行转换。</li><li>例如，VBO 将从网格创建，纹理将被解压等。</li></ul><p>从 Unity 5.3 开始，对象加载已经并行化。多个对象在工作线程上被反序列化、处理和集成。当一个对象完成加载时，将调用其 Awake 回调，并且该对象将在下一帧期间可供 Unity 引擎的其余部分使用。<br>同步 AssetBundle.Load 方法将暂停主线程，直到对象加载完成。它们还将对对象加载进行时间切片，限制每帧的占用的总的加载时间不会超过超过一定毫秒数。毫秒数由属性 Application.backgroundLoadingPriority 设置：</p><ul><li>ThreadPriority.High：每帧最多 50 毫秒</li><li>ThreadPriority.Normal：每帧最多 10 毫秒</li><li>ThreadPriority.BelowNormal：每帧最多 4 毫秒</li><li>ThreadPriority.Low：每帧最多 2 毫秒</li></ul><p>假设所有其他因素都相同，资产加载 API 的异步版本将始终比对应同步版本花费更长的时间来完成，因为发出异步调用和对象对引擎可用之间的至少也有最小一帧的延迟。</p><h2 id="assetbundle-依赖"><a class="anchor" href="#assetbundle-依赖">#</a> AssetBundle 依赖</h2><p>根据运行时环境，可以使用两个 API 自动跟踪 AssetBundle 之间的依赖关系：</p><ul><li>在 UnityEditor 中，可以通过 AssetDatabase API 查询 AssetBundle 依赖项</li><li>在运行时，Unity 提供了一个可选的 API ：AssetBundleManifest，可以加载在 AssetBundle 构建期间生成的依赖信息。</li></ul><p>如之前的序列化和实例部分所述，AssetBundle 充当其中包含的每个对象的 FileGUID 和 LocalID 标识的源数据的来源。<br>因为一个对象是在它的 InstanceID 第一次被间接引用时加载的，并且在加载一个 AssetBundle 时其中对象会被分配一个有效的 InstanceID，因此加载 AssetBundle 的顺序并不重要。</p><ul><li>相反，重要的是在加载对象本身之前加载所有包含对象依赖项的 AssetBundle (但不必显式去加载依赖资源)。</li><li>注：Unity 不会尝试自动加载任何被依赖的 AssetBundle 包本身</li></ul><h2 id="assetbundle-manifests"><a class="anchor" href="#assetbundle-manifests">#</a> AssetBundle manifests</h2><p>当使用 BuildPipeline.BuildAssetBundles API 执行 AssetBundle 构建时，Unity 会序列化一个包含每个 AssetBundle 的依赖信息的对象。</p><ul><li>此数据存储在单独的，与构建 AssetBundle 的父目录同名的 AssetBundle 中，其中包含一个 AssetBundleManifest 类型的对象。</li><li>例如构建目的目录为：<ul><li><em>(projectroot)/build/Client/</em></li><li>则包含清单的 AssetBundle 将被保存为：<em>(projectroot)/build/Client/Client.manifest</em></li></ul></li></ul><p>包含清单的 AssetBundle 可以像任何其他 AssetBundle 一样加载、缓存和卸载：</p><ul><li>AssetBundle bundle =AssetBundle.LoadFromFile((projectroot)/build/Client/Client)</li><li>AssetBundleManifest manifest =bundle.LoadAsset<assetbundlemanifest>(&quot;AssetBundleManifest&quot;);</assetbundlemanifest></li></ul><p>AssetBundleManifest 对象本身提供了 GetAllAssetBundles API 来列出与清单同时构建的所有 AssetBundle，并提供两种方法来查询特定 AssetBundle 的依赖项：</p><ul><li>AssetBundleManifest.GetAllDependencies 返回 AssetBundle 的所有层次依赖关系，包括 AssetBundle 的直接子项、其子项的子项等的依赖项</li><li>AssetBundleManifest.GetDirectDependencies 仅返回 AssetBundle 的直接子级依赖</li></ul><p>注意：这两个 API 都分配字符串数组。因此它们应该被谨慎使用，而不是在应用程序生命周期的性能敏感部分使用。</p><h2 id="卸载-assetbundle-方式"><a class="anchor" href="#卸载-assetbundle-方式">#</a> 卸载 AssetBundle 方式</h2><p>切换场景 (即当 SceneManager.LoadScene 被非附加地调用时)</p><ul><li>将销毁当前场景中的所有对象并自动调用 Resources.UnloadUnusedAssets</li></ul><p>脚本调用 Resources.UnloadUnusedAssets 时</p><ul><li>此过程仅卸载未引用的对象：仅当没有 Mono 变量持有对对象的引用并且没有其他活动对象持有对对象的引用时，才会卸载对象</li></ul><p>调用 AssetBundle.Unload (true) API 时，源自 AssetBundle 的对象会自动并立即卸载</p><ul><li>这会使对象实例 ID 的文件 GUID 和本地 ID 无效，并且对已卸载对象的任何实时引用都将成为 Missing 引用</li><li>在 C# 脚本中，尝试访问已卸载对象的方法或属性将产生 NullReferenceException</li><li>如果调用 AssetBundle.Unload (false)--<em> 不推荐使用</em>，来自已卸载 AssetBundle 的活动对象将不会被销毁，但 Unity 将使其 FileGUID 和 LocalID 引用无效。如果稍后从内存中卸载这些对象并且对卸载对象的实时引用仍然存在，Unity 将不可能重新加载这些对象。</li></ul><p>注：当 Unity 失去对其图形上下文的控制时，对象在运行时会从显存中移除。这可能发生在移动应用程序暂停并且应用程序被迫进入后台时。在这种情况下，移动操作系统通常会从 GPU 内存中逐出所有图形资源。当应用程序返回前台时，Unity 必须在场景渲染恢复之前将所有需要的纹理、着色器和网格重新加载到 GPU (如果 AssetBundle 已经被卸载，就会导致问题)</p><h2 id="注意-安卓"><a class="anchor" href="#注意-安卓">#</a> 注意 - 安卓</h2><p>安卓平台：</p><ul><li>在 Android 上，StreamingAssets 文件夹中的资源存储在 APK 中，如果它们被压缩可能需要更多时间来加载，因为存储在 APK 中的文件可以使用不同的存储算法。</li><li>使用 7-zip 等归档程序打开 APK 可以确定文件是否被压缩，如果是则 AssetBundle.LoadFromFile 肯定执行得更慢，这种情况下可以使用 UnityWebRequest.GetAssetBundle 作为解决方法来检索缓存的版本。通过使用 UnityWebRequest，AssetBundle 将在第一次运行期间被解压缩和缓存，从而使后续执行速度更快。但是将占用更多存储空间，因为 AssetBundle 将被复制到缓存中。</li><li>或者可以编辑 build.gradle 文件并将该扩展名添加到 noCompress 部分，这样使用 AssetBundle.LoadFromFile () 也能无需消耗额外解压缩成本。</li></ul><h2 id="总结-2"><a class="anchor" href="#总结-2">#</a> 总结</h2><p>多数情况下，最好在玩家进入程序的性能关键区域（例如主游戏关卡或世界）之前加载尽可能多的所需对象。这在移动平台上尤为重要，因为在移动平台上访问本地存储很慢，并且在运行时加载和卸载对象的内存波动会触发 GC<br>使用 AssetBundle.LoadFromFile 加载资源并采用 AssetBundle.Unload (true) 释放资源。</p><h1 id="参考文档"><a class="anchor" href="#参考文档">#</a> 参考文档</h1><p><span class="exturl" data-url="aHR0cHM6Ly9nd2IudGVuY2VudC5jb20vY29tbXVuaXR5L2RldGFpbC8xMjUwMjc=">Unity 资源管理 - 资源（Assets）、对象（Objects）和序列化 - 腾讯游戏学堂</span><br><span class="exturl" data-url="aHR0cHM6Ly9sZWFybi51bml0eS5jb20vdHV0b3JpYWwvYXNzZXRzLXJlc291cmNlcy1hbmQtYXNzZXRidW5kbGVz">Assets, Resources and AssetBundles - Unity Learn</span></p><div class="tags"><a href="/tags/Unity3D/" rel="tag"><i class="ic i-tag"></i> Unity3D</a> <a href="/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" rel="tag"><i class="ic i-tag"></i> 性能优化</a> <a href="/tags/%E7%AC%94%E8%AE%B0/" rel="tag"><i class="ic i-tag"></i> 笔记</a> <a href="/tags/%E7%BF%BB%E8%AF%91/" rel="tag"><i class="ic i-tag"></i> 翻译</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2023-10-02 17:13:03" itemprop="dateModified" datetime="2023-10-02T17:13:03+08:00">2023-10-02</time></span></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>WangJiaYing <i class="ic i-at"><em>@</em></i>CWHISME</li><li class="link"><strong>本文链接：</strong> <a href="https://wangjiaying.top/2023/06/16/Unity3DAssets-ResourcesAndAssetBundles-%E7%AC%94%E8%AE%B0/" title="Assets、Resources 和 AssetBundles - 翻译 - 笔记">https://wangjiaying.top/2023/06/16/Unity3DAssets-ResourcesAndAssetBundles-笔记/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2023/06/12/NET%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E5%AE%9D%E5%85%B8_1/" itemprop="url" rel="prev" data-background-image="&#x2F;blogimages&#x2F;2023&#x2F;2023-06-26&#x2F;book.webp" title="《.NET内存管理宝典》-笔记(1)"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> 阅读笔记</span><h3>《.NET内存管理宝典》-笔记(1)</h3></a></div><div class="item right"><a href="/2023/06/26/NET%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E5%AE%9D%E5%85%B8-2/" itemprop="url" rel="next" data-background-image="&#x2F;blogimages&#x2F;2023&#x2F;2023-06-26&#x2F;book.webp" title="《.NET内存管理宝典》-笔记(2)"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> 阅读笔记</span><h3>《.NET内存管理宝典》-笔记(2)</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B5%84%E6%BA%90%E4%B8%8E%E5%BA%8F%E5%88%97%E5%8C%96"><span class="toc-number">2.</span> <span class="toc-text">资源与序列化</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#assets-and-objects"><span class="toc-number">2.1.</span> <span class="toc-text">Assets and Objects</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%87%E8%AF%86%E4%B8%8E%E5%BC%95%E7%94%A8"><span class="toc-number">2.2.</span> <span class="toc-text">标识与引用</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#monoscript"><span class="toc-number">3.</span> <span class="toc-text">MonoScript</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B5%84%E6%BA%90%E5%8A%A0%E8%BD%BD"><span class="toc-number">4.</span> <span class="toc-text">资源加载</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%A0%E8%BD%BD%E6%96%B9%E5%BC%8F"><span class="toc-number">4.1.</span> <span class="toc-text">加载方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%A7%E8%B5%84%E6%BA%90%E5%8A%A0%E8%BD%BD%E6%B6%88%E8%80%97"><span class="toc-number">4.2.</span> <span class="toc-text">大资源加载消耗</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#resources-%E7%9B%AE%E5%BD%95"><span class="toc-number">5.</span> <span class="toc-text">Resources 目录</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#assetbundle"><span class="toc-number">6.</span> <span class="toc-text">AssetBundle</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%A0%E8%BD%BD-assetbundle-%E6%96%B9%E5%BC%8F"><span class="toc-number">6.1.</span> <span class="toc-text">加载 AssetBundle 方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#assetbundleloadfrommemoryasync"><span class="toc-number">6.1.1.</span> <span class="toc-text">AssetBundle.LoadFromMemory(Async)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#assetbundleloadfromfileasync"><span class="toc-number">6.1.2.</span> <span class="toc-text">AssetBundle.LoadFromFile(Async)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#unitywebrequestgetassetbundle"><span class="toc-number">6.1.3.</span> <span class="toc-text">UnityWebRequest.GetAssetBundle</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#wwwloadfromcacheordownload"><span class="toc-number">6.1.4.</span> <span class="toc-text">WWW.LoadFromCacheOrDownload</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">6.1.5.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%A0%E8%BD%BD-assetbundle-%E4%B8%AD%E7%9A%84%E8%B5%84%E6%BA%90"><span class="toc-number">6.2.</span> <span class="toc-text">加载 AssetBundle 中的资源</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BA%95%E5%B1%82%E5%8A%A0%E8%BD%BD%E7%BB%86%E8%8A%82"><span class="toc-number">6.3.</span> <span class="toc-text">底层加载细节</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#assetbundle-%E4%BE%9D%E8%B5%96"><span class="toc-number">6.4.</span> <span class="toc-text">AssetBundle 依赖</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#assetbundle-manifests"><span class="toc-number">6.5.</span> <span class="toc-text">AssetBundle manifests</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%B8%E8%BD%BD-assetbundle-%E6%96%B9%E5%BC%8F"><span class="toc-number">6.6.</span> <span class="toc-text">卸载 AssetBundle 方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F-%E5%AE%89%E5%8D%93"><span class="toc-number">6.7.</span> <span class="toc-text">注意 - 安卓</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-2"><span class="toc-number">6.8.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E6%A1%A3"><span class="toc-number">7.</span> <span class="toc-text">参考文档</span></a></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/2015/12/09/Unity3D-%E9%80%9A%E8%BF%87%E5%8A%A8%E7%94%BB%E4%BA%8B%E4%BB%B6%E5%AE%9E%E7%8E%B0%E6%B8%B8%E6%88%8F%E8%84%9A%E5%8D%B0/" rel="bookmark" title="Unity3D 通过动画事件实现游戏脚印">Unity3D 通过动画事件实现游戏脚印</a></li><li><a href="/2015/12/29/%E5%B5%8C%E5%A5%97Prefab%E7%9A%84Editor%E5%8A%9F%E8%83%BD/" rel="bookmark" title="嵌套Prefab的Editor功能">嵌套Prefab的Editor功能</a></li><li><a href="/2016/04/19/%E5%9C%A8Unity%E4%B8%AD%E5%8A%A8%E6%80%81%E5%88%9B%E5%BB%BAMesh/" rel="bookmark" title="在Unity中动态创建Mesh">在Unity中动态创建Mesh</a></li><li><a href="/2016/04/23/%E5%9C%A8Unity%E4%B8%AD%E5%8A%A8%E6%80%81%E6%94%B9%E5%8F%98Mesh/" rel="bookmark" title="在Unity中动态改变Mesh">在Unity中动态改变Mesh</a></li><li><a href="/2016/05/31/Unity3D%E4%B8%ADShader%E7%9A%84%E9%98%B4%E5%BD%B1/" rel="bookmark" title="Unity3D中Shader的阴影">Unity3D中Shader的阴影</a></li><li><a href="/2016/07/01/%E6%A0%B9%E6%8D%AE%E5%9C%B0%E5%BD%A2%E8%B4%B4%E5%9B%BE%E5%AE%9E%E7%8E%B0%E8%84%9A%E5%8D%B0%E5%8F%8A%E7%9B%B8%E5%BA%94%E6%95%88%E6%9E%9C/" rel="bookmark" title="根据所在地形贴图实现脚印等效果">根据所在地形贴图实现脚印等效果</a></li><li><a href="/2016/08/13/%E4%BD%9C%E5%93%81-CryStoryEditor/" rel="bookmark" title="CryStoryEditor">CryStoryEditor</a></li><li><a href="/2016/08/13/%E4%BD%9C%E5%93%81-%E5%B7%A5%E4%BD%9C%E4%B9%8B%E5%89%8D/" rel="bookmark" title="[Demo]工作之前">[Demo]工作之前</a></li><li><a href="/2016/10/29/%E4%BD%9C%E5%93%81-CryDialogSystem/" rel="bookmark" title="CryDialogSystem与设计原因">CryDialogSystem与设计原因</a></li><li><a href="/2016/11/04/Shader-%E5%83%8F%E7%B4%A0%E6%89%AD%E6%9B%B2%E6%95%88%E6%9E%9C/" rel="bookmark" title="[Shader]像素扭曲效果">[Shader]像素扭曲效果</a></li><li><a href="/2016/11/17/Unity3D%E8%B5%84%E6%BA%90%E5%BC%95%E7%94%A8%E6%9F%A5%E8%AF%A2%E5%B7%A5%E5%85%B7/" rel="bookmark" title="Unity3D资源引用查询工具">Unity3D资源引用查询工具</a></li><li><a href="/2016/11/21/Unity3D-Tri-planar-Terrain/" rel="bookmark" title="Unity3D Tri-planar Terrain">Unity3D Tri-planar Terrain</a></li><li><a href="/2016/12/15/Tri-planar-Terrain-%E4%BA%8C-%E9%94%99%E8%AF%AF%E4%BF%AE%E6%AD%A3/" rel="bookmark" title="Tri-planar Terrain (二) 错误修正">Tri-planar Terrain (二) 错误修正</a></li><li><a href="/2017/02/10/%E4%BD%9C%E5%93%81-Magic-Civilizition/" rel="bookmark" title="[Demo]Magic Civilizition">[Demo]Magic Civilizition</a></li><li><a href="/2017/02/14/%E6%8E%A7%E5%88%B6%E5%8F%B0%E7%B1%BB%E5%9E%8B%E7%9A%84%E4%BD%9C%E5%BC%8A%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0/" rel="bookmark" title="【工具】控制台类型的作弊系统实现">【工具】控制台类型的作弊系统实现</a></li><li><a href="/2017/03/09/2017-3-9-Unity-Optimization-Summary/" rel="bookmark" title="Unity3D性能优化总结">Unity3D性能优化总结</a></li><li><a href="/2017/05/07/2017-5-7-Unity-use-othographic-camera-map/" rel="bookmark" title="Unity3D以正交相机截取作大地图">Unity3D以正交相机截取作大地图</a></li><li><a href="/2017/05/10/2017-5-10-Unity-Kinect/" rel="bookmark" title="Unity Kinect 开发">Unity Kinect 开发</a></li><li><a href="/2021/01/26/Unity3DSahder%E5%85%B3%E9%94%AE%E5%AD%97/" rel="bookmark" title="Unity3D Sahder 关键字">Unity3D Sahder 关键字</a></li><li><a href="/2021/02/02/Sahder%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0/" rel="bookmark" title="Sahder内置函数">Sahder内置函数</a></li><li><a href="/2021/03/10/Sahder%E4%B8%AD%E6%B7%B1%E5%BA%A6%E5%9B%BE%E5%8F%8A%E5%BA%94%E7%94%A8/" rel="bookmark" title="Unity3D中Sahder深度图及应用">Unity3D中Sahder深度图及应用</a></li><li><a href="/2021/07/08/Box2DSharp%E7%9A%84%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BD%BF%E7%94%A8/" rel="bookmark" title="Box2DSharp的介绍与使用">Box2DSharp的介绍与使用</a></li><li><a href="/2021/07/15/%E4%BD%BF%E7%94%A8VS2019%E8%B0%83%E8%AF%95Unity2020%E4%B8%ADDLL%E9%97%AE%E9%A2%98/" rel="bookmark" title="使用VS2019调试Unity2020中DLL的问题">使用VS2019调试Unity2020中DLL的问题</a></li><li><a href="/2021/07/23/%E3%80%8E%E9%94%81%E3%80%8F%E5%B8%A7%E5%90%8C%E6%AD%A5%E7%9A%84%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0/" rel="bookmark" title="『锁』帧同步的简单实现">『锁』帧同步的简单实现</a></li><li><a href="/2021/07/28/%E4%BD%BF%E7%94%A8MagicCloth%E5%81%9A%E8%A1%A3%E7%89%A9%E6%88%96%E5%A4%B4%E5%8F%91%E7%89%A9%E7%90%86%E6%95%88%E6%9E%9C/" rel="bookmark" title="使用MagicCloth做衣物或头发物理效果">使用MagicCloth做衣物或头发物理效果</a></li><li><a href="/2021/08/06/%E4%BB%A3%E7%A0%81%E8%B0%83%E7%94%A8TexturePacker%E6%89%93%E5%9B%BE%E9%9B%86%E5%B9%B6%E7%94%9F%E6%88%90%E5%8A%A8%E7%94%BB/" rel="bookmark" title="代码调用TexturePacker打图集并生成动画">代码调用TexturePacker打图集并生成动画</a></li><li><a href="/2021/09/15/%E9%A1%B9%E7%9B%AE%E4%B8%AD%E8%B5%84%E6%BA%90%E6%89%93%E5%8C%85%E6%B5%81%E7%A8%8B/" rel="bookmark" title="项目中资源打包流程">项目中资源打包流程</a></li><li><a href="/2021/09/28/%E5%85%B3%E4%BA%8EInjectFix%E4%BD%9C%E4%B8%BA%E7%83%AD%E6%9B%B4%E7%9A%84%E4%B8%80%E7%82%B9%E8%AE%B0%E5%BD%95/" rel="bookmark" title="关于InjectFix作为热更的一点记录">关于InjectFix作为热更的一点记录</a></li><li><a href="/2021/10/25/%E4%B8%8A%E6%9E%B6%E6%A3%80%E6%B5%8B%E6%8F%90%E7%A4%BA%E6%9C%89Unity%E5%B9%BF%E5%91%8A%E6%9C%8D%E5%8A%A1/" rel="bookmark" title="上架检测提示有Unity广告服务">上架检测提示有Unity广告服务</a></li><li><a href="/2022/06/14/%E6%96%B0%E5%87%BA%E7%9A%84Huatuo%E7%83%AD%E6%9B%B4%E7%9A%84%E4%B8%80%E7%82%B9%E5%B0%9D%E8%AF%95/" rel="bookmark" title="新出的Huatuo热更的一点尝试">新出的Huatuo热更的一点尝试</a></li><li><a href="/2022/07/20/%E5%85%B3%E4%BA%8E%E6%B1%89%E5%AE%A4%E5%A4%8D%E5%85%B4%E5%8D%87%E7%BA%A7Unity2021%E7%9A%84%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/" rel="bookmark" title="关于汉室复兴升级Unity2021的问题记录">关于汉室复兴升级Unity2021的问题记录</a></li><li><a href="/2022/07/21/%E5%A4%84%E7%90%86Unity2019%E7%9A%84UGUI%E9%A1%B6%E7%82%B9%E6%95%B0%E6%8D%AE%E6%9B%B4%E6%96%B0%E5%90%8E%E7%9A%84%E5%9B%BE%E6%96%87%E6%B7%B7%E6%8E%92%E9%97%AE%E9%A2%98/" rel="bookmark" title="处理Unity2019的UGUI顶点数据更新后的图文混排问题">处理Unity2019的UGUI顶点数据更新后的图文混排问题</a></li><li><a href="/2022/08/31/%E5%85%B3%E4%BA%8E%E4%BB%8EUnity2021%E9%99%8D%E7%BA%A7%E4%B8%BAUnity2018%E7%9A%84%E9%97%AE%E9%A2%98/" rel="bookmark" title="关于从Unity2021降级为Unity2018的问题">关于从Unity2021降级为Unity2018的问题</a></li><li><a href="/2022/09/28/%E8%A7%A3%E5%86%B3%E5%AE%88%E6%9C%9B%E9%A1%B9%E7%9B%AE%E5%88%98%E6%B5%B7%E5%B1%8F%E7%9C%9F%E6%9C%BA%E7%99%BD%E5%B1%8F%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/" rel="bookmark" title="解决守望项目刘海屏真机白屏问题记录">解决守望项目刘海屏真机白屏问题记录</a></li><li><a href="/2022/09/30/%E5%85%B3%E4%BA%8E%E7%BA%AA%E5%85%83%E9%A1%B9%E7%9B%AEDemo/" rel="bookmark" title="关于纪元项目Demo">关于纪元项目Demo</a></li><li><a href="/2022/10/26/%E5%9B%BE%E7%89%87%E8%B5%84%E6%BA%90%E6%A0%BC%E5%BC%8F%E8%AE%BE%E7%BD%AE%E6%B5%8B%E8%AF%95%E4%B8%8E%E6%80%BB%E7%BB%93/" rel="bookmark" title="图片资源格式设置测试与总结">图片资源格式设置测试与总结</a></li><li><a href="/2022/11/08/%E9%9F%B3%E6%95%88%E8%B5%84%E6%BA%90%E8%AE%BE%E7%BD%AE%E6%B5%8B%E8%AF%95%E4%B8%8E%E6%80%BB%E7%BB%93/" rel="bookmark" title="音效资源设置测试与总结">音效资源设置测试与总结</a></li><li><a href="/2022/11/23/%E6%89%93%E5%8C%85AssetBundle%E5%9F%BA%E7%A1%80%E8%A7%84%E5%88%99%E6%95%B4%E7%90%86/" rel="bookmark" title="打包 AssetBundle 的基础规则整理">打包 AssetBundle 的基础规则整理</a></li><li><a href="/2022/12/06/Unity%E7%9A%84%E9%98%B4%E5%BD%B1%E4%B8%8E%E5%85%89%E7%85%A7%E7%83%98%E7%84%99/" rel="bookmark" title="Unity 的阴影与光照烘焙">Unity 的阴影与光照烘焙</a></li><li><a href="/2022/12/28/%E6%B5%85%E8%B0%88Unity%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86-%E7%AC%94%E8%AE%B0/" rel="bookmark" title="浅谈Unity内存管理-笔记">浅谈Unity内存管理-笔记</a></li><li><a href="/2022/12/28/%E6%8F%AD%E7%A7%98Unity%E7%9A%84%E9%BB%91%E7%9B%92%E4%B8%96%E7%95%8C-%E7%AC%94%E8%AE%B0/" rel="bookmark" title="揭秘Unity的黑盒世界-笔记">揭秘Unity的黑盒世界-笔记</a></li><li><a href="/2022/12/30/Mesh%E6%B8%B2%E6%9F%93%E4%BC%98%E5%8C%96%E4%B8%8E%E6%89%B9%E5%A4%84%E7%90%86/" rel="bookmark" title="Mesh渲染优化与批处理">Mesh渲染优化与批处理</a></li><li><a href="/2023/02/17/%E5%85%B3%E4%BA%8EAssetBundleManifest%E4%BD%BF%E7%94%A8/" rel="bookmark" title="关于AssetBundleManifest使用疑问">关于AssetBundleManifest使用疑问</a></li><li><a href="/2023/02/24/%E5%86%8D%E6%8E%A2TexturePacker%E5%91%BD%E4%BB%A4%E8%A1%8C%E8%AE%BE%E7%BD%AE/" rel="bookmark" title="再探TexturePacker命令行设置">再探TexturePacker命令行设置</a></li><li><a href="/2023/04/27/CS%E4%B8%8EXLua%E4%BA%A4%E4%BA%92%E5%8E%9F%E7%90%86%E7%A0%94%E7%A9%B6/" rel="bookmark" title="C#与XLua交互原理研究">C#与XLua交互原理研究</a></li><li><a href="/2023/05/12/%E5%9B%BE%E5%BD%A2%E5%9F%BA%E7%A1%80-Unity3D/" rel="bookmark" title="渲染基础-Unity3D-笔记">渲染基础-Unity3D-笔记</a></li><li><a href="/2023/05/27/Cinemachine%E6%96%87%E6%A1%A3%E7%BF%BB%E8%AF%91/" rel="bookmark" title="Cinemachine文档整理翻译">Cinemachine文档整理翻译</a></li><li><a href="/2023/05/29/DOTS1-0-Metaverse%E5%A4%A7%E8%A1%8D%E7%A5%9E%E5%90%9B%E7%B3%BB%E5%88%97-%E7%AC%94%E8%AE%B0/" rel="bookmark" title="DOTS1.0(Metaverse大衍神君系列)-笔记">DOTS1.0(Metaverse大衍神君系列)-笔记</a></li><li><a href="/2023/06/09/Timeline%E6%95%B4%E7%90%86%E7%BF%BB%E8%AF%91/" rel="bookmark" title="Timeline 整理翻译笔记">Timeline 整理翻译笔记</a></li><li class="active"><a href="/2023/06/16/Unity3DAssets-ResourcesAndAssetBundles-%E7%AC%94%E8%AE%B0/" rel="bookmark" title="Assets、Resources 和 AssetBundles-翻译-笔记">Assets、Resources 和 AssetBundles-翻译-笔记</a></li><li><a href="/2023/07/10/Addressables-%E7%AC%94%E8%AE%B0/" rel="bookmark" title="Unity Addressables 笔记">Unity Addressables 笔记</a></li><li><a href="/2023/11/18/JobSystem%E7%9A%84%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/" rel="bookmark" title="JobSystem 的简单使用">JobSystem 的简单使用</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="WangJiaYing" data-src="/images/../img/avator"><p class="name" itemprop="name">CWHISME</p><div class="description" itemprop="description">己所不欲，勿施于人</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">131</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">24</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">35</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL2N3aGlzbWU=" title="https:&#x2F;&#x2F;github.com&#x2F;cwhisme"><i class="ic i-github"></i></span> <span class="exturl item zhihu" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3Blb3BsZS9jd2hpc21lLTMzL3Bvc3Rz" title="https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;cwhisme-33&#x2F;posts"><i class="ic i-zhihu"></i></span> <span class="exturl item email" data-url="bWFpbHRvOmN3aGlzbWVAMTI2LmNvbQ==" title="mailto:cwhisme@126.com"><i class="ic i-envelope"></i></span> <a href="/atom.xml" title="&#x2F;atom.xml" class="item feedback"><i class="ic i-heart"></i></a></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>友链</a></li><li class="item"><a href="/statistics/" rel="section"><i class="ic i-clock"></i>统计</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2023/06/12/NET%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E5%AE%9D%E5%85%B8_1/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2023/06/26/NET%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E5%AE%9D%E5%85%B8-2/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/" title="分类于 阅读笔记">阅读笔记</a></div><span><a href="/2023/08/04/NET%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E5%AE%9D%E5%85%B8-5/" title="《.NET内存管理宝典》-笔记(5)">《.NET内存管理宝典》-笔记(5)</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Unity3D/" title="分类于 Unity3D">Unity3D</a></div><span><a href="/2021/07/28/%E4%BD%BF%E7%94%A8MagicCloth%E5%81%9A%E8%A1%A3%E7%89%A9%E6%88%96%E5%A4%B4%E5%8F%91%E7%89%A9%E7%90%86%E6%95%88%E6%9E%9C/" title="使用MagicCloth做衣物或头发物理效果">使用MagicCloth做衣物或头发物理效果</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Unity3D/" title="分类于 Unity3D">Unity3D</a></div><span><a href="/2023/11/18/JobSystem%E7%9A%84%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/" title="JobSystem 的简单使用">JobSystem 的简单使用</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment count_3"></ul></div></div><div class="status"><div class="copyright">&copy; 2015 – <span itemprop="copyrightYear">2025</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">WangJiaYing @ Jiaying's Note</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">772k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">11:42</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0NXSElTTUUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2023/06/16/Unity3DAssets-ResourcesAndAssetBundles-笔记/",favicon:{show:"（●´3｀●）",hide:"(´Д｀)"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,justifiedGallery:!0,jquery:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.staticfile.net/pace/1.2.4/pace.min.js"></script><script src="https://cdn.staticfile.net/pjax/0.2.8/pjax.min.js"></script><script src="https://cdn.staticfile.net/animejs/3.2.2/anime.min.js"></script><script src="https://cdn.staticfile.net/algoliasearch/4.17.0/algoliasearch-lite.umd.js"></script><script src="https://cdn.staticfile.net/instantsearch.js/4.54.1/instantsearch.production.min.js"></script><script src="https://cdn.staticfile.net/lozad.js/1.16.0/lozad.min.js"></script><script src="https://cdn.staticfile.net/quicklink/2.3.0/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script><script src="/js/DateTimeAfeterCalc.js" async></script><script src="https://fastly.jsdelivr.net/gh/CWHISME/live2d_api_models@master/autoload.js" async></script></body></html>