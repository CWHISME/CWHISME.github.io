<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="CWHISME" href="https://wangjiaying.top/rss.xml"><link rel="alternate" type="application/atom+xml" title="CWHISME" href="https://wangjiaying.top/atom.xml"><link rel="alternate" type="application/json" title="CWHISME" href="https://wangjiaying.top/feed.json"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="Unity3D,Shader"><link rel="canonical" href="https://wangjiaying.top/2021/01/26/Unity3DSahder%E5%85%B3%E9%94%AE%E5%AD%97/"><title>Unity3D Sahder 关键字 - Shader - Unity3D | Jiaying's Note = CWHISME = 人不能没有梦想，也要有足够的敬畏</title><meta name="generator" content="Hexo 5.4.2"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">Unity3D Sahder 关键字</h1><div class="meta"><span class="item" title="创建时间：2021-01-26 00:00:00"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2021-01-26T00:00:00+08:00">2021-01-26</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>9.5k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>9 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Jiaying's Note</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="/images/coverimages/large/61621237_p0.webp"></li><li class="item" data-background-image="/images/coverimages/large/78774408_p0.webp"></li><li class="item" data-background-image="/images/coverimages/large/97610662_p0.webp"></li><li class="item" data-background-image="/images/coverimages/large/6833939bly1giclflwv2aj20zk0m84qp.webp"></li><li class="item" data-background-image="/images/coverimages/large/104923272_p0.webp"></li><li class="item" data-background-image="/images/coverimages/large/mmexport1593577915202.webp"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/Unity3D/" itemprop="item" rel="index" title="分类于 Unity3D"><span itemprop="name">Unity3D</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/Unity3D/Shader/" itemprop="item" rel="index" title="分类于 Shader"><span itemprop="name">Shader</span></a><meta itemprop="position" content="2"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://wangjiaying.top/2021/01/26/Unity3DSahder%E5%85%B3%E9%94%AE%E5%AD%97/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/../img/avator"><meta itemprop="name" content="WangJiaYing"><meta itemprop="description" content="人不能没有梦想，也要有足够的敬畏, 己所不欲，勿施于人"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="CWHISME"></span><div class="body md" itemprop="articleBody"><p>用于记录 Unity3D 的 Shader 关键字、或内置函数、变量等，便于查询，视情况修改。</p><h2 id="properties"><a class="anchor" href="#properties">#</a> Properties</h2><p>[Attribute]_Name (&quot;Display Name&quot;,Type) = Default Value</p><h3 id="类型type"><a class="anchor" href="#类型type">#</a> 类型 (Type)</h3><ul><li>Color 颜色</li><li>Int 整数</li><li>Float、[Range (Min,Max)] 浮点数</li><li>Vector 四维向量</li><li>2D 纹理（默认值：white、black、grey、bump）</li><li>3D 纹理</li><li>Cube 立方体纹理</li></ul><h3 id="属性attribute"><a class="anchor" href="#属性attribute">#</a> 属性 (Attribute）</h3><ul><li>HDR：用于 Color 类型，将颜色取色器设置为支持 HDR 类型</li><li>PowerSlider (Value)：用于 Int 或 Float 类型，调整材质面板上滑杆拉动效果，对拉动值区间微调</li><li>IntRange：当标记给 Range (Min,Max) 类型时，会导致材质面板只能拖动整数值</li><li>Toggle：开关，用于 Int 或 Float 类型，0 代表关，1 代表开</li><li>Enum (C# 中的枚举类型)：枚举，用于 Int 或 Float 类型</li><li>NoScaleOffset：用于纹理类型，取消面板 Tiling 、Offset 的设置选项</li><li>Normal：用于 2D 纹理类型，标记图片必须为法线贴图</li><li>HideInInspector：在面板隐藏</li><li>MainTexture： 表示一个属性 (property) 是材质的主纹理。默认情况下，Unity 将属性 (property) 名称为 _MainTex 的纹理视为主纹理。</li><li>MainColor：表示一个属性 (property) 是材质的主色。默认情况下，Unity 将属性 (property) 名称为 _Color 的颜色视为主色。</li><li>Gamma：用于 Float 或 Vector，因为：如果是普通的 Color 属性，使用线性颜色空间时，所有材质颜色属性均以 sRGB 颜色提供，但在传递到着色器时会转换为线性值，该标记会使得 Float 或 Vector 也进行颜色空间转换。</li></ul><h3 id="纹理特殊说明"><a class="anchor" href="#纹理特殊说明">#</a> 纹理特殊说明</h3><h4 id="纹理平铺和偏移"><a class="anchor" href="#纹理平铺和偏移">#</a> 纹理平铺和偏移</h4><p>材质通常具有其纹理属性的 Tiling 和 Offset 字段。此信息将传递到着色器中的 float4 {TextureName}_ST 属性：</p><ul><li>x 包含 X 平铺值</li><li>y 包含 Y 平铺值</li><li>z 包含 X 偏移值</li><li>w 包含 Y 偏移值</li></ul><p>例如，如果着色器包含名为 _MainTex 的纹理，则平铺信息将位于 _MainTex_ST 矢量中。</p><h4 id="纹理大小"><a class="anchor" href="#纹理大小">#</a> 纹理大小</h4><p>{TextureName}_TexelSize - float4 属性包含纹理大小信息：</p><ul><li>x 包含 1.0 / 宽度</li><li>y 包含 1.0 / 高度</li><li>z 包含宽度</li><li>w 包含高度</li></ul><h4 id="纹理-hdr-参数"><a class="anchor" href="#纹理-hdr-参数">#</a> 纹理 HDR 参数</h4><p>{TextureName}_HDR - 一个 float4 属性，其中包含有关如何根据所使用的颜色空间解码潜在 HDR（例如 RGBM 编码）纹理的信息。</p><h4 id="基础示例"><a class="anchor" href="#基础示例">#</a> 基础示例</h4><figure class="highlight c"><figcaption data-lang="c"><span>c</span></figcaption><table><tr><td data-num="1"></td><td><pre>Shader <span class="token string">"TA/NewUnlitShader"</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	Properties</pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>		<span class="token punctuation">[</span>HDR<span class="token punctuation">]</span><span class="token function">_Color</span><span class="token punctuation">(</span><span class="token string">"Color"</span><span class="token punctuation">,</span>COLOR<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>		<span class="token punctuation">[</span>IntRange<span class="token punctuation">]</span><span class="token function">_Int</span><span class="token punctuation">(</span><span class="token string">"It's Int"</span><span class="token punctuation">,</span><span class="token function">Range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1</span></pre></td></tr><tr><td data-num="7"></td><td><pre>		<span class="token function">_Float</span><span class="token punctuation">(</span><span class="token string">"It's Float"</span><span class="token punctuation">,</span>Float<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1</span></pre></td></tr><tr><td data-num="8"></td><td><pre>		<span class="token function">_Vector</span><span class="token punctuation">(</span><span class="token string">"It's Vector"</span><span class="token punctuation">,</span>Vector<span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>		<span class="token punctuation">[</span>NoScaleOffset<span class="token punctuation">]</span><span class="token function">_Texture2D</span><span class="token punctuation">(</span><span class="token string">"2D Texture"</span><span class="token punctuation">,</span><span class="token number">2</span>D<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token string">"white"</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>		<span class="token punctuation">[</span>NoScaleOffset<span class="token punctuation">]</span><span class="token function">_Texture3D</span><span class="token punctuation">(</span><span class="token string">"3D Texture"</span><span class="token punctuation">,</span><span class="token number">3</span>D<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>		<span class="token punctuation">[</span>NoScaleOffset<span class="token punctuation">]</span><span class="token function">_TextureCube</span><span class="token punctuation">(</span><span class="token string">"Cube Texture"</span><span class="token punctuation">,</span>Cube<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    SubShader</pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>		Pass<span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>	</pre></td></tr><tr><td data-num="18"></td><td><pre>    Fallback <span class="token string">"Diffuse"</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    CustomEditor <span class="token string">"EditorName"</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="结构"><a class="anchor" href="#结构">#</a> 结构</h2><h3 id="shader变量"><a class="anchor" href="#shader变量">#</a> Shader 变量</h3><ul><li><p>float：32 位浮点数，完整的 float 精度通常用于世界空间位置、纹理坐标或涉及复杂函数（如三角函数或幂 / 取幂）的标量计算。</p></li><li><p>half：16 位浮点数，范围为 –60000 至 +60000，精度约为 3 位小数；一般用于短矢量、方向、对象空间位置、高动态范围颜色。</p></li><li><p>fixed：11 位定点数，范围从 –2.0 到 +2.0，精度为 1/256；一般用于常规颜色（通常存储在常规纹理中）以及对它们执行简单运算。</p></li><li><p>int：32 位整型；通常用作循环计数器或数组索引。</p></li><li><p>float4、float4x4：复合矢量 / 矩阵类型 (half 亦同)</p></li><li><p>sampler2D、sampler3D、samplerCUBE：纹理使用 (亦有 sampler2D_half、sampler2D_float)<br>若使用默认纹理，在移动平台纹理会被自动转换成低精度的纹理类型，如果需要半精度的或者高精度的便需要用以下方式来声明：</p><p>sampler2D_half、<br>sampler2D_float、<br>sampler3D_half、<br>sampler3D_float、<br>samplerCUBE_halft、<br>samplerCUBE_float</p></li></ul><p>一般的经验法则是全部都从半精度开始（但位置和纹理坐标除外）。仅当半精度对于计算的某些部分不足时，才增加精度。</p><h3 id="向顶点程序提供的顶点数据"><a class="anchor" href="#向顶点程序提供的顶点数据">#</a> 向顶点程序提供的顶点数据</h3><ul><li>POSITION 是顶点位置，通常为 float3 或 float4。</li><li>NORMAL 是顶点法线，通常为 float3。</li><li>TEXCOORD0 是第一个 UV 坐标，通常为 float2、float3 或 float4。</li><li>TEXCOORD1、TEXCOORD2 和 TEXCOORD3 分别是第 2、第 3 和第 4 个 UV 坐标。</li><li>TANGENT 是切线矢量（用于法线贴图），通常为 float4。</li><li>COLOR 顶点颜色，通常为 float4。</li></ul><figure class="highlight c"><figcaption data-lang="c"><span>c</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">appdata_full</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    float4 vertex <span class="token operator">:</span> POSITION<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    float4 tangent <span class="token operator">:</span> TANGENT<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    float3 normal <span class="token operator">:</span> NORMAL<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    float4 texcoord <span class="token operator">:</span> TEXCOORD0<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    float4 texcoord1 <span class="token operator">:</span> TEXCOORD1<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    float4 texcoord2 <span class="token operator">:</span> TEXCOORD2<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    float4 texcoord3 <span class="token operator">:</span> TEXCOORD3<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    fixed4 color <span class="token operator">:</span> COLOR<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    UNITY_VERTEX_INPUT_INSTANCE_ID</pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>若如下所示 引用 了 UnityCG.cginc，则具有四个 Unity3D 预定义的结构体：</p><ul><li>appdata_base： vertex, normal, texcoord.</li><li>appdata_tan： vertex, tangent, normal, texcoord.</li><li>appdata_full： vertex, tangent, normal, texcoord, texcoord1, texcoord2, texcoord3, color.</li><li>appdata_img: vertex, texcoord.</li></ul><figure class="highlight c"><figcaption data-lang="c"><span>c</span></figcaption><table><tr><td data-num="1"></td><td><pre>CGPROGRAM</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// ...</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">"UnityCG.cginc"</span></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">// ...</span></pre></td></tr><tr><td data-num="5"></td><td><pre>ENDCG</pre></td></tr></table></figure><h3 id="标签subshader-tags"><a class="anchor" href="#标签subshader-tags">#</a> 标签（SubShader Tags）</h3><pre><code>ex: Tags &#123; &quot;TagName1&quot; = &quot;Value1&quot; &quot;TagName2&quot; = &quot;Value2&quot; &#125;
</code></pre><table><thead><tr><th>标签</th><th>参数</th></tr></thead><tbody><tr><td>Queue</td><td>预定义：Background (1000)、Geometry (2000)、AlphaTest (2450)、Transparent (3000)、Overlay (4000)；亦可选择直接填写数值，或类似 『Geometry+500』</td></tr><tr><td>RenderType</td><td>使用替换的着色器进行渲染，脚本可使用函数 Camera.RenderWithShader 或 Camera.SetReplacementShader 来实现着色器替换 (ResetReplacementShader 重置，有同标签 shader 物体则替换渲染，无的物体则不再被渲染)。</td></tr><tr><td>DisableBatching</td><td>&quot;true&quot; or &quot;false&quot; ，是否禁用批处理；or &quot;LODFading&quot;(当 LOD 淡化处于激活状态时禁用批处理；主要用于树)</td></tr><tr><td>ForceNoShadowCasting</td><td>&quot;true&quot; or &quot;false&quot;，该子着色器渲染的对象是否投射阴影</td></tr><tr><td>IgnoreProjector</td><td>若值为 “True”，则使用此着色器的对象不会受到投影器 (Projector [Unity 组件]) 的影响。</td></tr><tr><td>PreviewType</td><td>指示材质检视面板预览应如何显示材质。默认情况下，材质显示为球体，但也可以将 PreviewType 设置为 “Plane”（将显示为 2D）或 “Skybox”（将显示为天空盒）。</td></tr><tr><td>CanUseSpriteAtlas</td><td>如果着色器用于精灵，请将 CanUseSpriteAtlas 标签设置为 “False”，这样在精灵打包到图集内时，该标签将不起作用。</td></tr></tbody></table><h3 id="渲染状态设置"><a class="anchor" href="#渲染状态设置">#</a> 渲染状态设置</h3><h4 id="cull"><a class="anchor" href="#cull">#</a> Cull</h4><p><code>Cull Back | Front | Off</code> 设置多边形剔除模式。</p><h4 id="ztest"><a class="anchor" href="#ztest">#</a> ZTest</h4><p><code>ZTest (Less | Greater | LEqual | GEqual | Equal | NotEqual | Always)</code> 设置深度缓冲区测试模式。默认值为 <em>LEqual</em>（将前方或远处的对象作为现有对象绘制；隐藏其后面的对象）。</p><h4 id="zwrite"><a class="anchor" href="#zwrite">#</a> ZWrite</h4><p><code>ZWrite On | Off</code> 设置深度缓冲区写入模式（默认值为 <em>On</em>）。</p><h4 id="offset"><a class="anchor" href="#offset">#</a> Offset</h4><p><code>Offset Factor, Units</code> 设置 Z 缓冲区深度偏移。允许使用两个参数指定深度偏移：<em>factor</em> 和 units。Factor 相对于多边形的 X 或 Y 缩放最大 Z 斜率，而 units 缩放最小可分辨深度缓冲区值。因此可强制将一个多边形绘制在另一个多边形上，尽管它们实际上位于相同位置。例如，Offset 0, -1 将多边形拉近摄像机并忽略多边形的斜率，而 Offset -1, -1 在观察掠射角时进一步拉近多边形。</p><h4 id="colormask"><a class="anchor" href="#colormask">#</a> ColorMask</h4><p><code>ColorMask RGB | A | 0 | R、G、B、A 的任意组合</code> 设置颜色通道写入遮罩。</p><h4 id="混合blend"><a class="anchor" href="#混合blend">#</a> 混合（Blend）</h4><p>设置 Alpha 混合、Alpha 操作和 alpha-to-coverage 模式。</p><h5 id="混合运算"><a class="anchor" href="#混合运算">#</a> 混合运算</h5><table><thead><tr><th>操作</th><th>说明</th></tr></thead><tbody><tr><td>Add</td><td>将源和目标相加。</td></tr><tr><td>Sub</td><td>从源减去目标。</td></tr><tr><td>RevSub</td><td>从目标减去源。</td></tr><tr><td>Min</td><td>使用源和目标中的较小者。</td></tr><tr><td>Max</td><td>使用源和目标中的较大者。</td></tr></tbody></table><h5 id="混合系数"><a class="anchor" href="#混合系数">#</a> 混合系数</h5><table><thead><tr><th>操作</th><th>说明</th></tr></thead><tbody><tr><td>One</td><td>值为 1 - 让源或目标颜色通过。</td></tr><tr><td>Zero</td><td>值为 0 - 删除源或目标值。</td></tr><tr><td>SrcColor</td><td>此阶段的值乘以源颜色值。</td></tr><tr><td>SrcAlpha</td><td>此阶段的值乘以源 Alpha 值。</td></tr><tr><td>DstColor</td><td>此阶段的值乘以帧缓冲区源颜色值。</td></tr><tr><td>DstAlpha</td><td>此阶段的值乘以帧缓冲区源 Alpha 值。</td></tr><tr><td>OneMinusSrcColor</td><td>此阶段的值乘以（1 - 源颜色）。</td></tr><tr><td>OneMinusSrcAlpha</td><td>此阶段的值乘以（1 - 源 Alpha）。</td></tr><tr><td>OneMinusDstColor</td><td>此阶段的值乘以（1 - 目标颜色）。</td></tr><tr><td>OneMinusDstAlpha</td><td>此阶段的值乘以（1 - 目标 Alpha）。</td></tr></tbody></table><h5 id="常用"><a class="anchor" href="#常用">#</a> 常用</h5><pre><code>Blend SrcAlpha OneMinusSrcAlpha // 传统透明度
Blend One OneMinusSrcAlpha // 预乘透明度
Blend One One // 加法
Blend OneMinusDstColor One // 软加法
Blend DstColor Zero // 乘法
Blend DstColor SrcColor // 2x 乘法
</code></pre><h3 id="语义"><a class="anchor" href="#语义">#</a> 语义</h3><ul><li>SV_POSITION：顶点着色器输出顶点的最终裁剪空间位置</li><li>SV_Target：片段着色器输出语义（SV_TargetN [SV_Target1、SV_Target2 等]）</li><li>SV_Depth：片段着色器深度输出</li><li>VPOS：(UNITY_VPOS_TYPE) 屏幕空间像素位置。[需求 #pragma target 3.0]</li><li>VFACE：正面的 VFACE 输入为正，背面的为负。[需求 #pragma target 3.0]</li><li>SV_VertexID：(uint) 顶点 ID [需求 #pragma target 3.5]</li></ul><h2 id="内置函数"><a class="anchor" href="#内置函数">#</a> 内置函数</h2><h3 id="unitycgcginc"><a class="anchor" href="#unitycgcginc">#</a> UnityCG.cginc</h3><h4 id="通用"><a class="anchor" href="#通用">#</a> 通用</h4><table><thead><tr><th>函数</th><th>说明</th></tr></thead><tbody><tr><td>float4 UnityObjectToClipPos(float3 pos)</td><td>将对象空间中的点变换到齐次坐标中的摄像机裁剪空间。这等效于 mul (UNITY_MATRIX_MVP, float4 (pos, 1.0))，应该在适当的位置使用</td></tr><tr><td>float3 UnityObjectToViewPos(float3 pos)</td><td>将对象空间中的点变换到视图空间。这等效于 <strong>mul(UNITY_MATRIX_MV, float4(pos, 1.0)).xyz</strong>，应该在适当的位置使用</td></tr><tr><td>float3 WorldSpaceViewDir(float4 v)</td><td>返回从给定对象空间顶点位置朝向摄像机的世界空间方向（未标准化）</td></tr><tr><td>float3 ObjSpaceViewDir(float4 v)</td><td>返回从给定对象空间顶点位置朝向摄像机的对象空间方向（未标准化）</td></tr><tr><td>float2 ParallaxOffset(half h, half height, half3 viewDir)</td><td>计算视差法线贴图的 UV 偏移</td></tr><tr><td>fixed Luminance(fixed3 c)</td><td>将颜色转换为亮度（灰阶）</td></tr><tr><td>fixed3 DecodeLightmap(fixed4 color)</td><td>从 Unity 光照贴图（RGBM 或 dLDR，具体取决于平台）解码颜色</td></tr><tr><td>float4 EncodeFloatRGBA(float v)</td><td>将 [0..1) 范围浮点数编码为 RGBA 颜色，用于存储在低精度渲染目标中</td></tr><tr><td>float DecodeFloatRGBA(float4 enc)</td><td>将 RGBA 颜色解码为浮点数</td></tr><tr><td>float2 EncodeFloatRG(float v)</td><td>将 [0..1) 范围浮点数编码为 float2</td></tr><tr><td>float DecodeFloatRG(float2 enc)</td><td>解码先前编码的 RG 浮点数</td></tr><tr><td>float2 EncodeViewNormalStereo(float3 n)</td><td>将视图空间法线编码为 0 到 1 范围内的两个数字</td></tr><tr><td>float3 DecodeViewNormalStereo(float4 enc4)</td><td>从 enc4.xy 解码视图空间法线</td></tr><tr><td>float4 ComputeScreenPos(float4 clipPos)</td><td>计算用于执行屏幕空间贴图纹理采样的纹理坐标。输入是裁剪空间位置</td></tr><tr><td>float4 ComputeGrabScreenPos(float4 clipPos)</td><td>计算用于 GrabPass 纹理采样的纹理坐标。输入是裁剪空间位置</td></tr><tr><td>float3 UnityWorldSpaceViewDir(float3 worldPos)</td><td>给定世界坐标，计算视线方向向量，返回值并未归一化</td></tr><tr><td>float3 WorldSpaceViewDir(float4 localPos)</td><td>给定物体空间坐标，计算视线方向向量，返回值并未归一化</td></tr><tr><td>float3 UnityObjectToWorldNormal(float3 norm)</td><td>将法线从物体空间变换至世界空间</td></tr></tbody></table><h4 id="特定渲染下的辅助函数"><a class="anchor" href="#特定渲染下的辅助函数">#</a> 特定渲染下的辅助函数</h4><p>仅当使用前向渲染（ForwardBase 或 ForwardAdd 通道类型）时，这些函数才有用。</p><table><thead><tr><th>函数</th><th>说明</th></tr></thead><tbody><tr><td>float3 WorldSpaceLightDir(float4 v)</td><td>根据给定的对象空间顶点位置计算朝向光源的世界空间方向（未标准化）。</td></tr><tr><td>float3 ObjSpaceLightDir(float4 v)</td><td>根据给定对象空间顶点位置计算朝向光源的对象空间方向（未标准化）。</td></tr><tr><td>float3 Shade4PointLights(...)</td><td>计算四个点光源的光照，将光源数据紧密打包到矢量中。前向渲染使用它来计算每顶点光照。</td></tr></tbody></table><p>仅当使用每顶点光照着色器（“Vertex” 通道类型）时，这些函数才有用。</p><p>| 函数 | 说明 |<br>float3 ShadeVertexLights (float4 vertex, float3 normal)| 根据给定的对象空间位置和法线计算四个每顶点光源和环境光的光照。</p><h2 id="内置着色器变量"><a class="anchor" href="#内置着色器变量">#</a> 内置着色器变量</h2><h3 id="变换"><a class="anchor" href="#变换">#</a> 变换</h3><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>UNITY_MATRIX_MVP</td><td>当前模型 * 视图 * 投影矩阵。</td></tr><tr><td>UNITY_MATRIX_MV</td><td>当前模型 * 视图矩阵。</td></tr><tr><td>UNITY_MATRIX_V</td><td>当前视图矩阵。</td></tr><tr><td>UNITY_MATRIX_P</td><td>当前投影矩阵。</td></tr><tr><td>UNITY_MATRIX_VP</td><td>当前视图 * 投影矩阵。</td></tr><tr><td>UNITY_MATRIX_T_MV</td><td>模型转置 * 视图矩阵。</td></tr><tr><td>UNITY_MATRIX_IT_MV</td><td>模型逆转置 * 视图矩阵。用于将法线从模型转换至相机空间。</td></tr><tr><td>unity_ObjectToWorld</td><td>当前模型矩阵。</td></tr><tr><td>unity_WorldToObject</td><td>当前世界矩阵的逆矩阵。</td></tr></tbody></table><h3 id="摄像机和屏幕"><a class="anchor" href="#摄像机和屏幕">#</a> 摄像机和屏幕</h3><table><thead><tr><th>名称</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>_WorldSpaceCameraPos</td><td>float3</td><td>摄像机的世界空间位置。</td></tr><tr><td>_ProjectionParams</td><td>float4</td><td>x 是 1.0（如果当前使用翻转投影矩阵进行渲染，则为 –1.0），y 是摄像机的近平面，z 是摄像机的远平面，w 是远平面的倒数。</td></tr><tr><td>_ScreenParams</td><td>float4</td><td>x 是摄像机目标纹理的宽度（以像素为单位），y 是摄像机目标纹理的高度（以像素为单位），z 是 1.0 + 1.0 / 宽度，w 为 1.0 + 1.0 / 高度。</td></tr><tr><td>_ZBufferParams</td><td>float4</td><td>用于线性化 Z 缓冲区值。x 是 (1 - 远 / 近)，y 是 (远 / 近)，z 是 (x / 远)，w 是 (y / 远)。</td></tr><tr><td>unity_OrthoParams</td><td>float4</td><td>x 是正交摄像机的宽度，y 是正交摄像机的高度，z 未使用，w 在摄像机为正交模式时是 1.0，而在摄像机为透视模式时是 0.0。</td></tr><tr><td>unity_CameraProjection</td><td>float4x4</td><td>摄像机的投影矩阵。</td></tr><tr><td>unity_CameraInvProjection</td><td>float4x4</td><td>摄像机投影矩阵的逆矩阵。</td></tr><tr><td>unity_CameraWorldClipPlanes[6]</td><td>float4</td><td>摄像机视锥体平面世界空间方程，按以下顺序：左、右、底、顶、近、远。</td></tr></tbody></table><h3 id="时间"><a class="anchor" href="#时间">#</a> 时间</h3><table><thead><tr><th>名称</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>_Time</td><td>float4</td><td>自关卡加载以来的时间 (t/20, t, t<em>2, t</em>3)，用于将着色器中的内容动画化。</td></tr><tr><td>_SinTime</td><td>float4</td><td>时间正弦：(t/8, t/4, t/2, t)。</td></tr><tr><td>_CosTime</td><td>float4</td><td>时间余弦：(t/8, t/4, t/2, t)。</td></tr><tr><td>unity_DeltaTime</td><td>float4</td><td>增量时间：(dt, 1/dt, smoothDt, 1/smoothDt)。</td></tr></tbody></table><h3 id="光照"><a class="anchor" href="#光照">#</a> 光照</h3><p>前向渲染（ForwardBase 和 ForwardAdd 通道类型）：</p><table><thead><tr><th>名称</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>_LightColor0</td><td>fixed4</td><td>光源颜色（在 UnityLightingCommon.cginc 中声明）。</td></tr><tr><td>_WorldSpaceLightPos0</td><td>float4</td><td>方向光：（世界空间方向，0）。其他光源：（世界空间位置，1）。</td></tr><tr><td>unity_WorldToLight</td><td>float4x4</td><td>世界 / 光源矩阵。用于对剪影和衰减纹理进行采样（在 AutoLight.cginc 中声明）。</td></tr><tr><td>unity_4LightPosX0、unity_4LightPosY0、unity_4LightPosZ0</td><td>float4</td><td>（仅限 ForwardBase 通道）前四个非重要点光源的世界空间位置。</td></tr><tr><td>unity_4LightAtten0</td><td>float4</td><td>（仅限 ForwardBase 通道）前四个非重要点光源的衰减因子。</td></tr><tr><td>unity_LightColor</td><td>half4[4]</td><td>（仅限 ForwardBase 通道）前四个非重要点光源的颜色。</td></tr><tr><td>unity_WorldToShadow</td><td>float4x4[4]</td><td>世界 / 阴影矩阵。聚光灯的一个矩阵，方向光级联最多有四个矩阵。</td></tr></tbody></table><h3 id="光照贴图"><a class="anchor" href="#光照贴图">#</a> 光照贴图</h3><table><thead><tr><th>名称</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>unity_Lightmap</td><td>Texture2D</td><td>包含光照贴图信息。</td></tr><tr><td>unity_LightmapST</td><td>float4[8]</td><td>缩放 UV 信息并转换到正确的范围以对光照贴图纹理进行采样。</td></tr></tbody></table><h3 id="雾效和环境光"><a class="anchor" href="#雾效和环境光">#</a> 雾效和环境光</h3><p>unity_AmbientSky|	fixed4|	梯度环境光照情况下的天空环境光照颜色。<br>unity_AmbientEquator|	fixed4|	梯度环境光照情况下的赤道环境光照颜色。<br>unity_AmbientGround|	fixed4|	梯度环境光照情况下的地面环境光照颜色。<br>UNITY_LIGHTMODEL_AMBIENT|	fixed4|	环境光照颜色（梯度环境情况下的天空颜色）。旧版变量。<br>unity_FogColor|	fixed4|	雾效颜色。<br>unity_FogParams|	float4|	用于雾效计算的参数：(density /sqrt (ln (2))、density /ln (2)、–1/(end-start) 和 end/(end-start))。x 对于 Exp2 雾模式很有用；<em>y</em> 对于 Exp 模式很有用，<em>z</em> 和 w 对于 Linear 模式很有用。</p><h2 id="特殊"><a class="anchor" href="#特殊">#</a> 特殊</h2><h3 id="grabpass"><a class="anchor" href="#grabpass">#</a> GrabPass</h3><p>一般以使用：</p><pre><code>GrabPass &#123; &quot;TextureName&quot; &#125; 
sampler2D TextureName
</code></pre><h3 id="摄像机的深度纹理"><a class="anchor" href="#摄像机的深度纹理">#</a> 摄像机的深度纹理</h3><p>通过声明 sampler2D _CameraDepthTexture 可直接引用；非线性值，存在 x 中，范围 [0,1]</p><p>(注：另外还有 _LastCameraDepthTexture 纹理)</p><p>可使用帮助函数：</p><p>名 | 说明<br>Linear01Depth (i)| 通过深度纹理 i 给出高精度值时，返回相应的线性深度，范围在 0 到 1 之间<br>LinearEyeDepth (i)| 通过深度纹理 i 计算，返回相应的视空间线性深度<br>COMPUTE_EYEDEPTH (float3 o)| 顶点函数中使用，返回当前顶点视空间深度，一般用于不会被记录深度值的透明物体自身</p><ul><li>获取当前物体当前深度：</li></ul><figure class="highlight c"><figcaption data-lang="c"><span>c</span></figcaption><table><tr><td data-num="1"></td><td><pre>vert：<span class="token function">COMPUTE_EYEDEPTH</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>screenPos<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 返回的为该物体处于视空间的深度值</span></pre></td></tr><tr><td data-num="2"></td><td><pre>frag：fixed depth<span class="token operator">=</span><span class="token function">LinearEyeDepth</span><span class="token punctuation">(</span><span class="token function">tex2Dproj</span><span class="token punctuation">(</span>_CameraDepthTexture<span class="token punctuation">,</span>i<span class="token punctuation">.</span>screenPos<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// 获取该片元之前位于视空间的深度值，并将其转化为线性值</span></pre></td></tr></table></figure><p>若通过 <code>depth.x-(i.screenPos.z)</code> 直接返回为颜色值，则会有如图结果：</p><p><img data-src="/blogimages/2021/2021-01-26-Unity3DSahder%E5%85%B3%E9%94%AE%E5%AD%97.png" alt="地形混合贴图"></p><p><font color="red">注：仅 “不透明” 对象（这些对象的材质和着色器设置为使用小于等于 2500 的渲染队列）会自动被渲染到深度纹理中</font></p><h3 id="透明物体"><a class="anchor" href="#透明物体">#</a> 透明物体</h3><p>分为 透明度测试 (无效像素直接丢弃)、 透明度混合两类。<br>需要着重注意渲染顺序问题，Queue 标签对队列进行标识</p><p>若使用透明度混合，为解决透明物体渲染问题，可使用一个 Pass 开启深度测试，第二个 Pass 进行正常处理：</p><pre><code>Tags &#123;&quot;Queue&quot;=&quot;Transparent&quot; &quot;RenderType&quot;=&quot;Transparent&quot;&#125;
Pass&#123;
	ZWrite On
	ColorMask 0
&#125;
Pass&#123;
	ZWrite Off
	Cull Off
	Blend XXX XXX
	//TODO:...
&#125;
</code></pre><p>关于此详细可参考 <span class="exturl" data-url="aHR0cHM6Ly9kcmFnb25fYm95LmdpdGVlLmlvLzIwMjAvMDYvMjAvVW5pdHlTaGFkZXJBbHBoYS8=">Dragons blog：Unity Shader: 透明效果</span></p><h3 id="usepass"><a class="anchor" href="#usepass">#</a> UsePass</h3><p>复用指定 Shader 的 Pass：</p><pre><code>UsePass &quot;Shader/NAME&quot;
</code></pre><blockquote><p>注：指定 Shader 的 Pass 需使用 <code>Name &quot;MyPassName&quot;</code> 命名，且在内部，所有通道名称均大写，因此 UsePass 必须引用大写名称。</p></blockquote><hr><blockquote><p>注：测试环境为 Unity3D 2019.2.4f1<br>参考:</p><ul><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL2NvbHVtbi91bml0eVRB">知乎专栏</span></li><li><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLnVuaXR5LmNuLzIwMTkuNC9Eb2N1bWVudGF0aW9uL01hbnVhbC9TTC1EYXRhVHlwZXNBbmRQcmVjaXNpb24uaHRtbA==">Unity3D 官方文档</span></li></ul></blockquote><div class="tags"><a href="/tags/Unity3D/" rel="tag"><i class="ic i-tag"></i> Unity3D</a> <a href="/tags/Shader/" rel="tag"><i class="ic i-tag"></i> Shader</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2022-12-22 11:29:48" itemprop="dateModified" datetime="2022-12-22T11:29:48+08:00">2022-12-22</time></span></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>WangJiaYing <i class="ic i-at"><em>@</em></i>CWHISME</li><li class="link"><strong>本文链接：</strong> <a href="https://wangjiaying.top/2021/01/26/Unity3DSahder%E5%85%B3%E9%94%AE%E5%AD%97/" title="Unity3D Sahder 关键字">https://wangjiaying.top/2021/01/26/Unity3DSahder关键字/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2021/01/06/2020%E5%B9%B4%E6%80%BB%E7%BB%93/" itemprop="url" rel="prev" data-background-image="&#x2F;images&#x2F;coverimages&#x2F;large&#x2F;885401e8e3deb675916f0b4d9888125f_2_2_art.webp" title="2020年总结+关于此Blog"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> 总结</span><h3>2020年总结+关于此Blog</h3></a></div><div class="item right"><a href="/2021/02/02/Sahder%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0/" itemprop="url" rel="next" data-background-image="&#x2F;images&#x2F;coverimages&#x2F;large&#x2F;mmexport1593577915202.webp" title="Sahder内置函数"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> Shader</span><h3>Sahder内置函数</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#properties"><span class="toc-number">1.</span> <span class="toc-text">Properties</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8Btype"><span class="toc-number">1.1.</span> <span class="toc-text">类型 (Type)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7attribute"><span class="toc-number">1.2.</span> <span class="toc-text">属性 (Attribute）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%B9%E7%90%86%E7%89%B9%E6%AE%8A%E8%AF%B4%E6%98%8E"><span class="toc-number">1.3.</span> <span class="toc-text">纹理特殊说明</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BA%B9%E7%90%86%E5%B9%B3%E9%93%BA%E5%92%8C%E5%81%8F%E7%A7%BB"><span class="toc-number">1.3.1.</span> <span class="toc-text">纹理平铺和偏移</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BA%B9%E7%90%86%E5%A4%A7%E5%B0%8F"><span class="toc-number">1.3.2.</span> <span class="toc-text">纹理大小</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BA%B9%E7%90%86-hdr-%E5%8F%82%E6%95%B0"><span class="toc-number">1.3.3.</span> <span class="toc-text">纹理 HDR 参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E7%A4%BA%E4%BE%8B"><span class="toc-number">1.3.4.</span> <span class="toc-text">基础示例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%93%E6%9E%84"><span class="toc-number">2.</span> <span class="toc-text">结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#shader%E5%8F%98%E9%87%8F"><span class="toc-number">2.1.</span> <span class="toc-text">Shader 变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%91%E9%A1%B6%E7%82%B9%E7%A8%8B%E5%BA%8F%E6%8F%90%E4%BE%9B%E7%9A%84%E9%A1%B6%E7%82%B9%E6%95%B0%E6%8D%AE"><span class="toc-number">2.2.</span> <span class="toc-text">向顶点程序提供的顶点数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%87%E7%AD%BEsubshader-tags"><span class="toc-number">2.3.</span> <span class="toc-text">标签（SubShader Tags）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B8%B2%E6%9F%93%E7%8A%B6%E6%80%81%E8%AE%BE%E7%BD%AE"><span class="toc-number">2.4.</span> <span class="toc-text">渲染状态设置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#cull"><span class="toc-number">2.4.1.</span> <span class="toc-text">Cull</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ztest"><span class="toc-number">2.4.2.</span> <span class="toc-text">ZTest</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#zwrite"><span class="toc-number">2.4.3.</span> <span class="toc-text">ZWrite</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#offset"><span class="toc-number">2.4.4.</span> <span class="toc-text">Offset</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#colormask"><span class="toc-number">2.4.5.</span> <span class="toc-text">ColorMask</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B7%B7%E5%90%88blend"><span class="toc-number">2.4.6.</span> <span class="toc-text">混合（Blend）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B7%B7%E5%90%88%E8%BF%90%E7%AE%97"><span class="toc-number">2.4.6.1.</span> <span class="toc-text">混合运算</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B7%B7%E5%90%88%E7%B3%BB%E6%95%B0"><span class="toc-number">2.4.6.2.</span> <span class="toc-text">混合系数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8"><span class="toc-number">2.4.6.3.</span> <span class="toc-text">常用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%AD%E4%B9%89"><span class="toc-number">2.5.</span> <span class="toc-text">语义</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0"><span class="toc-number">3.</span> <span class="toc-text">内置函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#unitycgcginc"><span class="toc-number">3.1.</span> <span class="toc-text">UnityCG.cginc</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9A%E7%94%A8"><span class="toc-number">3.1.1.</span> <span class="toc-text">通用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%B9%E5%AE%9A%E6%B8%B2%E6%9F%93%E4%B8%8B%E7%9A%84%E8%BE%85%E5%8A%A9%E5%87%BD%E6%95%B0"><span class="toc-number">3.1.2.</span> <span class="toc-text">特定渲染下的辅助函数</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E7%BD%AE%E7%9D%80%E8%89%B2%E5%99%A8%E5%8F%98%E9%87%8F"><span class="toc-number">4.</span> <span class="toc-text">内置着色器变量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E6%8D%A2"><span class="toc-number">4.1.</span> <span class="toc-text">变换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%91%84%E5%83%8F%E6%9C%BA%E5%92%8C%E5%B1%8F%E5%B9%95"><span class="toc-number">4.2.</span> <span class="toc-text">摄像机和屏幕</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%B6%E9%97%B4"><span class="toc-number">4.3.</span> <span class="toc-text">时间</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%89%E7%85%A7"><span class="toc-number">4.4.</span> <span class="toc-text">光照</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%89%E7%85%A7%E8%B4%B4%E5%9B%BE"><span class="toc-number">4.5.</span> <span class="toc-text">光照贴图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%BE%E6%95%88%E5%92%8C%E7%8E%AF%E5%A2%83%E5%85%89"><span class="toc-number">4.6.</span> <span class="toc-text">雾效和环境光</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A"><span class="toc-number">5.</span> <span class="toc-text">特殊</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#grabpass"><span class="toc-number">5.1.</span> <span class="toc-text">GrabPass</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%91%84%E5%83%8F%E6%9C%BA%E7%9A%84%E6%B7%B1%E5%BA%A6%E7%BA%B9%E7%90%86"><span class="toc-number">5.2.</span> <span class="toc-text">摄像机的深度纹理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%8F%E6%98%8E%E7%89%A9%E4%BD%93"><span class="toc-number">5.3.</span> <span class="toc-text">透明物体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#usepass"><span class="toc-number">5.4.</span> <span class="toc-text">UsePass</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/2016/05/31/Unity3D%E4%B8%ADShader%E7%9A%84%E9%98%B4%E5%BD%B1/" rel="bookmark" title="Unity3D中Shader的阴影">Unity3D中Shader的阴影</a></li><li><a href="/2016/11/04/Shader-%E5%83%8F%E7%B4%A0%E6%89%AD%E6%9B%B2%E6%95%88%E6%9E%9C/" rel="bookmark" title="[Shader]像素扭曲效果">[Shader]像素扭曲效果</a></li><li><a href="/2016/11/21/Unity3D-Tri-planar-Terrain/" rel="bookmark" title="Unity3D Tri-planar Terrain">Unity3D Tri-planar Terrain</a></li><li><a href="/2016/12/15/Tri-planar-Terrain-%E4%BA%8C-%E9%94%99%E8%AF%AF%E4%BF%AE%E6%AD%A3/" rel="bookmark" title="Tri-planar Terrain (二) 错误修正">Tri-planar Terrain (二) 错误修正</a></li><li class="active"><a href="/2021/01/26/Unity3DSahder%E5%85%B3%E9%94%AE%E5%AD%97/" rel="bookmark" title="Unity3D Sahder 关键字">Unity3D Sahder 关键字</a></li><li><a href="/2021/02/02/Sahder%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0/" rel="bookmark" title="Sahder内置函数">Sahder内置函数</a></li><li><a href="/2021/03/10/Sahder%E4%B8%AD%E6%B7%B1%E5%BA%A6%E5%9B%BE%E5%8F%8A%E5%BA%94%E7%94%A8/" rel="bookmark" title="Unity3D中Sahder深度图及应用">Unity3D中Sahder深度图及应用</a></li><li><a href="/2022/12/06/Unity%E7%9A%84%E9%98%B4%E5%BD%B1%E4%B8%8E%E5%85%89%E7%85%A7%E7%83%98%E7%84%99/" rel="bookmark" title="Unity 的阴影与光照烘焙">Unity 的阴影与光照烘焙</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="WangJiaYing" data-src="/images/../img/avator"><p class="name" itemprop="name">CWHISME</p><div class="description" itemprop="description">己所不欲，勿施于人</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">104</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">21</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">30</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL2N3aGlzbWU=" title="https:&#x2F;&#x2F;github.com&#x2F;cwhisme"><i class="ic i-github"></i></span> <span class="exturl item zhihu" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3Blb3BsZS9jd2hpc21lLTMzL3Bvc3Rz" title="https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;cwhisme-33&#x2F;posts"><i class="ic i-zhihu"></i></span> <span class="exturl item email" data-url="bWFpbHRvOmN3aGlzbWVAMTI2LmNvbQ==" title="mailto:cwhisme@126.com"><i class="ic i-envelope"></i></span> <a href="/atom.xml" title="&#x2F;atom.xml" class="item feedback"><i class="ic i-heart"></i></a></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/bookmark/" rel="section"><i class="ic i-tag"></i>书签</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-magic"></i>链接</a><ul class="submenu"><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>友達</a></li></ul></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2021/01/06/2020%E5%B9%B4%E6%80%BB%E7%BB%93/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2021/02/02/Sahder%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/%E7%90%86%E8%AE%BA%E7%A0%94%E7%A9%B6/" title="分类于 理论研究">理论研究</a></div><span><a href="/2023/02/01/CS-%E5%8D%8F%E7%A8%8B%E7%9A%84%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86/" title="C#协程的底层原理">C#协程的底层原理</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E6%B8%B8%E6%88%8F/" title="分类于 游戏">游戏</a></div><span><a href="/2021/11/23/AHK%E5%B1%8F%E5%B9%95%E9%A2%9C%E8%89%B2%E9%87%87%E6%A0%B7%E5%9C%A8%E4%B8%8D%E5%90%8C%E5%88%86%E8%BE%A8%E7%8E%87%E6%98%BE%E7%A4%BA%E5%99%A8%E4%B8%8B%E7%9A%84%E5%A4%84%E7%90%86/" title="AHK屏幕颜色采样在不同分辨率显示器下的处理">AHK屏幕颜色采样在不同分辨率显示器下的处理</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E5%85%B6%E5%AE%83/" title="分类于 其它">其它</a></div><span><a href="/2017/03/05/%E9%9D%A2%E8%AF%95-2017-3-5/" title="Unity3D 程序面试[2017.3.3]">Unity3D 程序面试[2017.3.3]</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment count_3"></ul></div></div><div class="status"><div class="copyright">&copy; 2015 – <span itemprop="copyrightYear">2023</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">WangJiaYing @ Jiaying's Note</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">558k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">8:27</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2021/01/26/Unity3DSahder关键字/",favicon:{show:"（●´3｀●）",hide:"(´Д｀)"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.staticfile.org/pace/1.2.4/pace.min.js"></script><script src="https://cdn.staticfile.org/pjax/0.2.8/pjax.min.js"></script><script src="https://cdn.jsdelivr.net/npm/whatwg-fetch@3.6.2/dist/fetch.umd.min.js"></script><script src="https://cdn.staticfile.org/animejs/3.2.1/anime.min.js"></script><script src="https://cdn.staticfile.org/algoliasearch/4.17.0/algoliasearch-lite.umd.js"></script><script src="https://cdn.staticfile.org/instantsearch.js/4.54.1/instantsearch.production.min.js"></script><script src="https://cdn.staticfile.org/lozad.js/1.16.0/lozad.min.js"></script><script src="https://cdn.staticfile.org/quicklink/2.3.0/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script><script src="/js/DateTimeAfeterCalc.js" async></script><script src="https://fastly.jsdelivr.net/gh/CWHISME/live2d_api_models@master/autoload.js" async></script><script data-pjax>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?62952472c154f9131a14a4ab57bfefec";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script></body></html>