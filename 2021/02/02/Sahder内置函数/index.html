<!DOCTYPE html><meta name="viewport" content="height=device-height,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=0"><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="cwhisme"><meta name="author" content="CWHISME"><meta property="og:title" content="Sahder内置函数"><meta property="og:description" content="cwhisme"><meta property="og:site_name" content="WangJiaYing"><meta property="og:type" content="article"><meta name="twitter:card" content="summary"><title>Sahder内置函数 - WangJiaYing</title><script type="text/javascript" src="https://fastly.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script><script type="text/javascript" src="https://fastly.jsdelivr.net/gh/CWHISME/CWHISME.github.io@master/js/DateTimeAfeterCalc.js"></script><script type="text/javascript" src="https://fastly.jsdelivr.net/gh/CWHISME/CWHISME.github.io@master/js/particles-bg.js"></script><script src="https://fastly.jsdelivr.net/gh/CWHISME/live2d_api_models@master/autoload.js"></script><script type="text/javascript" src="https://fastly.jsdelivr.net/npm/animejs@latest"></script><script type="text/javascript" src="https://fastly.jsdelivr.net/gh/CWHISME/CWHISME.github.io@master/js/script.js"></script><link href="https://fastly.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/gh/CWHISME/CWHISME.github.io@master/css/style.css"><script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]]}}</script><script id="MathJax-script" src="https://fastly.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/tachyons@4.12.0/css/tachyons.min.css"><meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="WangJiaYing" type="application/atom+xml">
</head><body><canvas id="hackEffectCanvas" style="position:fixed;z-index:-1;pointer-events:none"></canvas><canvas class="fireworks" style="position:fixed;z-index:10;pointer-events:none"></canvas><div class="w-100 bg-1 ph5-ns ph3 text-light"><nav class="db dt-l w-100 mw8 center border-box pv3"><a class="db dtc-l v-mid link dim w-100 w-25-l tc tl-l mb2 mb0-l white" href="/" title="WangJiaYing"><img src="https://fastly.jsdelivr.net/gh/CWHISME/CWHISME.github.io@master/img/logo.svg" class="dib h3" alt="WangJiaYing"></a><div class="db dtc-l v-mid w-100 w-75-l tc tr-l"><a class="link dim f6 f5-l dib mr3 mr4-l white" href="/" title="Home">Home </a><a class="link dim f6 f5-l dib mr3 mr4-l white" href="/archives" title="Archives">Archives </a><a class="link dim f6 f5-l dib mr3 mr4-l white" href="/tags" title="Tags">Tags </a><a class="link dim f6 f5-l dib mr3 mr4-l white" href="/categories" title="Categories">Categories </a><a class="link dim f6 f5-l dib mr3 mr4-l white" href="/bookmark" title="Bookmark">Bookmark </a><a class="link dim f6 f5-l dib mr3 mr4-l white" href="/about" title="About">About</a></div></nav><div class="w-100 mw8 center vh-40 dt"><div class="dtc v-mid white"><h1 class="f1-l f2-m tc tc-m tl-ns">Sahder内置函数</h1><p class="f4 fw3 pab-100px tc tc-m tl-ns"><i class="fa fa-calendar-check-o" aria-hidden="true"></i> 2021-02-02&nbsp&nbsp <i class="fa fa-clock-o" aria-hidden="true"></i> <span id="dateTimeAfter">2021-02-02</span></p></div></div><div class="relative w-100 mw8 center white dn dn-m db-ns"><i class="header-icon fa fa-snowflake-o"></i></div></div><div class="w-100 ph2 ph4-m ph5-l mv5 mv6-l"><div class="content"><div class="mw8 center"><div class="cf"><div class="fl w-100 w-70-l mw7 left fw3 lh-copy pr4-ns pr0-m post-content"><div class="tags-container-vertical"><div class="tags-sub-container"><a class="fw3 ph1 dib" href="/tags/Shader/">#Shader</a></div></div><p>Shader内置函数记录，特指可在Unity3D中使用的，且个人测试使用过的。</p><h2 id="数学函数"><a href="#数学函数" class="headerlink" title="数学函数"></a>数学函数</h2><table><thead><tr><th>函数</th><th>说明</th></tr></thead><tbody><tr><td>abs(x)</td><td>返回x的绝对值</td></tr><tr><td>ceil(x)</td><td>向上取整，返回不小于x的最小整数</td></tr><tr><td>lerp(a,b,f)</td><td>线性插值：$(1 – f )\times a + b \times f$，其中f可以是标量，也可以是与a和b类型相同的向量。</td></tr><tr><td>smoothstep(min,max,x)</td><td>返回 min 到 max 的平滑变化值，x值范围需求0~1；公式：<span>$-2\times(\frac{((x-min)}{(max-min))})^3+3\times(\frac{((x-min)}{(max-min))})^2$</span></td></tr><tr><td>step(a,x)</td><td>x&gt;=a?1:0</td></tr><tr><td>floor(x)</td><td>向下取整，返回不大于x的最大整数</td></tr><tr><td>max(a,b)</td><td>返回a、b中最大值</td></tr><tr><td>min(a,b)</td><td>返回a、b中最小值</td></tr><tr><td>round(x)</td><td>返回x的四舍五入值</td></tr><tr><td>clamp(x,a,b)</td><td>将x限制在a~b范围内；若x在a、b范围内则返回x，若x小于a则返回a，若x大于b则返回b</td></tr><tr><td>saturate(x)</td><td>将x值限制在 [0,1] 范围内</td></tr><tr><td>frac(x)</td><td>取x的小数位部分</td></tr><tr><td>sign(x)</td><td>若x&gt;0则返回1，若x&lt;0则返回-1，否则返回0</td></tr><tr><td>modf(x,ip[out])</td><td>将x拆分为小数和整数两部分，返回小数，并将整数部分赋值于ip</td></tr><tr><td>cross(A,B)</td><td>返回向量A与B的叉积，A与B必须为三维向量</td></tr><tr><td>dot(A,B)</td><td>返回向量A与B的点积</td></tr><tr><td>fmod(x,y)</td><td>返回 x 除以 y 的余数</td></tr><tr><td>pow(x,y)</td><td>$x^y$</td></tr><tr><td>sqrt(x)</td><td>返回x的平方根，x必须大于0</td></tr><tr><td>rsqrt(x)</td><td>返回x的倒数平方根（$\frac 1 {sqrt(x)}$），x必须大于0</td></tr><tr><td>exp(x)</td><td>返回指数函数 $e^x$</td></tr><tr><td>exp2(x)</td><td>返回指数函数 2$^x$</td></tr><tr><td>all(x)</td><td>如果x的每个值都不为0，则返回true，否则返回false(可当做1、0)</td></tr><tr><td>any(x)</td><td>只要x有一个值不为0，就返回true，否则返回false</td></tr><tr><td>sin(x)</td><td>取x的正弦，返回值范围为 [-1，1]</td></tr><tr><td>cos(x)</td><td>取x的余弦，返回值范围为 [-1，1]</td></tr><tr><td>sincos(float x,s[out],c[out])</td><td>返回x的，s：正弦、c：余弦；适用于需要同时计算sin、cos的情况，性能比单独计算更好</td></tr><tr><td>tan(x)</td><td>取x的正切</td></tr><tr><td>sinh(x)</td><td>取x的双曲正弦，返回值范围为 [$-\infty,+\infty$]</td></tr><tr><td>cosh(x)</td><td>取x的双曲余弦，返回值范围为 [1,$+\infty$]</td></tr><tr><td>tanh(x)</td><td>取x的双曲正切，返回值范围为 [-1,+1]；有公式：$tanh(x)=\frac{sinh(x)}{cosh(x)}=\frac{e^x-e^{-x}}{e^x+e^{-x}} [注:(sinh(x)\neq{e^x-e^{-x}}) (cosh(x)\neq{e^x+e^{-x}})]$</td></tr><tr><td>asin(x)</td><td>取x的反正弦，返回值范围为<span>[$-\frac\pi2, \frac\pi2$]</span>，传入的x值必须在[–1, 1]范围内</td></tr><tr><td>acos(x)</td><td>取x的反余弦，返回值范围为[0, $\pi$]，传入的x值必须在[–1, 1]范围内</td></tr><tr><td>atan(x)</td><td>取x的反正切，返回值范围为<span>[$-\frac\pi2, \frac\pi2$]</span></td></tr><tr><td>atan2(y,x)</td><td>取 y/x 的反正切，返回值范围为<span>[$-\pi, \pi$]</span></td></tr><tr><td>degrees(x)</td><td>将作为弧度值的x转换为角度</td></tr><tr><td>radians(x)</td><td>将作为角度值的x转换为弧度</td></tr><tr><td>determinant(M)</td><td>取矩阵M的行列式（返回似乎是行列式的一个值，可当float用）</td></tr><tr><td>frexp(x,exp[out])</td><td>把 x 分解成尾数和指数。返回值是尾数，并将指数存入 exp 中。所得的值是 x = 尾数 * 2 ^ exp。<a href="(https://www.runoob.com/cprogramming/c-function-frexp.html)">参考</a></td></tr><tr><td>isfinite(x)</td><td>如果x值有限，返回true</td></tr><tr><td>isinf(x)</td><td>如果x值无限，返回true</td></tr><tr><td>isnan(x)</td><td>如果x不是数字，返回true</td></tr><tr><td>ldexp(x,n)</td><td>返回 x 乘以 2 的 n 次幂 ($x\times2^n$)</td></tr><tr><td>lit(NdotL,NdotH,m)</td><td>计算环境光、漫射光和镜面光贡献的照明系数。返回值为四维向量：x为环境光系数，总是为1；y为漫反射系数，如果NdotL小于0则为0，否则为NdotL；z为镜面系数，如果NdotL或NdotH任一小于0则为0，否则返回$(N \cdot H)^m$</td></tr><tr><td>log(x)</td><td>返回x的自然对数(底为e=2.71828…)，x必须大于0 (注：对数函数有 $y=log _a x(a&gt;0 且 a \neq 1)$)</td></tr><tr><td>log2(x)</td><td>返回底为2的x的对数，x必须大于0</td></tr><tr><td>log10(x)</td><td>返回x的常用对数(底为10)，x必须大于0</td></tr></tbody></table><h2 id="矩阵运算"><a href="#矩阵运算" class="headerlink" title="矩阵运算"></a>矩阵运算</h2><ul><li><p>transpose(M)：返回矩阵M的转置矩阵，如果M是AxB矩阵，则M的转置矩阵是BxA矩阵，其第一列是M的第一行，第二列是M的第二列，第三列是M的第三行，等等。</p></li><li><p>mul(M,N)：矩阵M和矩阵N的矩阵积，如果M的大小为AxB，而N的大小为BxC，则返回一个大小为AxC的矩阵。</p></li></ul>$$ mul(M,N)= \begin{bmatrix} M_{11} & M_{21} & M_{31} & M_{41} \\ M_{12} & M_{22} & M_{32} & M_{42} \\ M_{13} & M_{23} & M_{33} & M_{43} \\ M_{14} & M_{24} & M_{34} & M_{44} \\ \end{bmatrix} \begin{bmatrix} M_{11} & M_{21} & M_{31} & M_{41} \\ M_{12} & M_{22} & M_{32} & M_{42} \\ M_{13} & M_{23} & M_{33} & M_{43} \\ M_{14} & M_{24} & M_{34} & M_{44} \\ \end{bmatrix} $$<ul><li>mul(M,v)：矩阵M和向量v的乘积，如果M是AxB矩阵，v是Bx1向量，则返回Ax1向量。</li></ul>$$ mul(M,v)= \begin{bmatrix} M_{11} & M_{21} & M_{31} & M_{41} \\ M_{12} & M_{22} & M_{32} & M_{42} \\ M_{13} & M_{23} & M_{33} & M_{43} \\ M_{14} & M_{24} & M_{34} & M_{44} \\ \end{bmatrix} \begin{bmatrix} v_{1} \\ v_{2} \\ v_{3} \\ v_{4} \\ \end{bmatrix} $$<ul><li>mul(v,M)：行向量v和矩阵M的乘积，如果v是1xA向量，M是AxB矩阵，则返回1xB向量。</li></ul>$$ mul(v,M)= \begin{bmatrix} v_{1} & v_{2} & v_{3} & v_{4} \\ \end{bmatrix} \begin{bmatrix} M_{11} & M_{21} & M_{31} & M_{41} \\ M_{12} & M_{22} & M_{32} & M_{42} \\ M_{13} & M_{23} & M_{33} & M_{43} \\ M_{14} & M_{24} & M_{34} & M_{44} \\ \end{bmatrix} $$<h2 id="几何函数"><a href="#几何函数" class="headerlink" title="几何函数"></a>几何函数</h2><table><thead><tr><th>函数</th><th>说明</th></tr></thead><tbody><tr><td>distance(point1,point2)</td><td>计算点point1与点point2之间的欧几里德距离</td></tr><tr><td>faceforward(N,I,Ng)</td><td>如果dot(Ng,I)&lt;0则返回N，否则返回-N</td></tr><tr><td>length(v)</td><td>返回向量v的长度</td></tr><tr><td>normalize(v)</td><td>对向量v进行归一化，仅保留方向</td></tr><tr><td>reflect(I,N)</td><td>由进入射线方向I和表面法线N计算反射矢量 (仅对三维向量有效)</td></tr><tr><td>refract(I,N,eta)</td><td>给定入射线方向I、法线N和折射系数eta，计算折射矢量；如果I和N之间的角度对于给定的eta来说太大，则返回(0,0,0) (仅对三维向量有效，折射系数：一般定值，可直接通过搜索获取对应数据表)</td></tr></tbody></table><h2 id="纹理相关函数"><a href="#纹理相关函数" class="headerlink" title="纹理相关函数"></a>纹理相关函数</h2><table><thead><tr><th>函数</th><th>说明</th></tr></thead><tbody><tr><td>tex2D(sampler2D tex,float2 uv)</td><td>二维纹理查询</td></tr><tr><td>tex2D(sampler2D tex,float2 s,float2 dsdx,float2 dsdy)</td><td>二维纹理查询，带导数，有点糊</td></tr><tr><td>tex2D(sampler2D tex,float3 sz)</td><td>二维纹理查询，带深度，普通图片没效果</td></tr><tr><td>tex2D(sampler2D tex,float3 sz,float2 dsdx ,float2 dsdy)</td><td>二维纹理查询，带导数，带深度</td></tr><tr><td>tex2Dproj(sampler2D tex , float4 szq)</td><td>二维投影纹理查询，跟tex2D差不多，只是会在对纹理采样前除以w分量 (例如GrabPass测试，Unity中tex2D(_MyGrabTexture,i.uv)与tex2Dproj(_MyGrab,float4(i.uv,0,1))结果表现是一致的)</td></tr><tr><td>tex3D(sampler3D tex,float3 s)</td><td>三维纹理查询 <a target="_blank" rel="noopener" href="https://docs.unity.cn/2019.4/Documentation/Manual/class-Texture3D.html">示例</a></td></tr><tr><td>tex3D(sampler3D tex,float3 s,float3 dsdx,float3 dsdy)</td><td>三维纹理查询，带导数</td></tr><tr><td>texCUBE(samplerCUBE tex,float3 s)</td><td>立方体纹理查询</td></tr><tr><td>texCUBE(samplerCUBE tex,float3 s,float3 dsdx,float3 dsdy)</td><td>立方体纹理查询，带导数</td></tr></tbody></table><h2 id="导数函数"><a href="#导数函数" class="headerlink" title="导数函数"></a>导数函数</h2><table><thead><tr><th>函数</th><th>说明</th></tr></thead><tbody><tr><td>ddx(a)</td><td>返回指定值相对于屏幕空间x坐标的偏导数</td></tr><tr><td>ddy(a)</td><td>返回指定值相对于屏幕空间y坐标的偏导数</td></tr></tbody></table><h2 id="特殊"><a href="#特殊" class="headerlink" title="特殊"></a>特殊</h2><table><thead><tr><th>函数</th><th>说明</th></tr></thead><tbody><tr><td>discard</td><td>片元程序使用，丢弃当前像素（会导致Early-Z无效）</td></tr><tr><td>clip(a)</td><td>片元程序使用，若a小于0则丢弃当前像素（会导致Early-Z无效）</td></tr><tr><td>noise</td><td>无效，不过noise可通过float noise = frac(sin(dot(v.uv.xy, float2(12.9898, 78.233))) * 43758.5453)进行trick</td></tr></tbody></table><hr><p>参考文档：<a target="_blank" rel="noopener" href="https://developer.download.nvidia.cn/CgTutorial/cg_tutorial_appendix_e.html">CgTutorial</a></p><div class="tags-container-bottom"><i class="fa fa-tag pr3 text-main-color"></i><a class="fw3 ph1 dib" href="/tags/Shader/">#Shader</a></div><br><br><hr><script type="text/javascript" src="https://fastly.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><div id="vcomments"></div><script>new Valine({el:"#vcomments",appId:"MsaVbSzIr9cIfikihDExdun9-gzGzoHsz",appKey:"Bj6SEFUBomrLOTWx9B8S6zQH",placeholder:"请输入评论内容~",avatar:"mp",visitor:!1})</script></div><div class="fl w-100 w-30-l center fw3 lh-copy pl4-ns tl black-50"><hr class="dn-l mw4 black-50 mt5"><div class="mt5 mt0-l site-author"><article class="dt db-l mw8 mw8-m mw5-ns center ml0-l bg-white mv3"><div class="dn dtc-m db-l v-mid tc pr4 pr0-l" style="min-width:6rem"><img src="https://fastly.jsdelivr.net/gh/CWHISME/CWHISME.github.io@master/img/photo.jpg" class="mb4-l br-100 h3 w3 h4-l w4-l dib" title="CWHISME"></div><div class="dtc db-l v-mid lh-copy measure center f6 black-50 tj">悲观主义的末日</div></article></div><hr class="dn-l mw4 black-50 mt5"><div class="mt5 tc tl-l"><h3>分类</h3><p><a href="/categories/图形学/">图形学</a></p></div><hr class="dn-l mw4 black-50 mt5"><div class="mt5 tc tl-l"><h3>近期文章</h3><p><a href="/2022/12/10/%E5%8D%8F%E5%8F%98%E5%92%8C%E9%80%86%E5%8F%98/">协变和逆变</a></p><p><a href="/2022/12/06/Unity%E7%9A%84%E9%98%B4%E5%BD%B1%E4%B8%8E%E5%85%89%E7%85%A7%E7%83%98%E7%84%99/">Unity 的阴影与光照烘焙</a></p><p><a href="/2022/11/23/%E6%89%93%E5%8C%85AssetBundle%E5%9F%BA%E7%A1%80%E8%A7%84%E5%88%99%E6%95%B4%E7%90%86/">打包 AssetBundle 的基础规则整理</a></p><p><a href="/2022/11/18/StringBuilder%E6%89%A9%E5%AE%B9%E8%A7%84%E5%88%99%E7%A0%94%E7%A9%B6/">StringBuilder 扩容规则研究</a></p><p><a href="/2022/11/17/%E6%B5%8B%E8%AF%95%E6%89%8B%E5%8A%A8%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/">简单测试手动垃圾回收</a></p></div></div></div></div></div></div><div class="bg-1 ph2 ph5-ns pv5"><div class="mv8"><div class="center tc"><div class="dib mh3"><a class="f3 f2-ns white dim" href="https://github.com/CWHISME" target="_blank"><i class="fa fa-github"></i></a></div><div class="dib mh3"><a class="f3 f2-ns white dim" href="mailto:cwhisme@126.com" target="_blank"><i class="fa fa-envelope"></i></a></div><div class="dib mh3"><a class="f3 f2-ns white dim" href="/atom.xml" target="_blank"><i class="fa fa-rss"></i></a></div></div><div class="f6 f5-ns center tc white pt5 fw3">Copyright © 2021 | Design & Hexo <a class="link dim white" target="_blank" rel="noopener" href="https://github.com/klugjo/hexo-theme-anodyne/">Jonathan Klughertz</a> | Modify By CWHISME</div></div></div></body></html>